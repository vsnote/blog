<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Mpd on 陈三</title>
    <link>https://www.zfanw.com/blog/tags/mpd/</link>
    <description>Recent content in Mpd on 陈三</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Mon, 08 Oct 2012 04:15:14 +0000</lastBuildDate>
    <atom:link href="https://www.zfanw.com/blog/tags/mpd/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Android 手机上 MPDroid 遥控 MPD</title>
      <link>https://www.zfanw.com/blog/mpdroid-remote-control-mpd.html</link>
      <pubDate>Mon, 08 Oct 2012 04:15:14 +0000</pubDate>
      
      <guid>https://www.zfanw.com/blog/mpdroid-remote-control-mpd.html</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://play.google.com/store/apps/details?id=com.namelessdev.mpdroid&amp;amp;hl=en&#34;&gt;MPDroid&lt;/a&gt; 是一个 MPD 客户端，从它的名称里的 &amp;#8220;Droid&amp;#8221; 可以看出，它是个 Android 应用软件。既然它是个 MPD 客户端，我们也就可以通过它控制 MPD 服务器里的音乐，还可以 streaming MPD 服务器上的音乐到手机即客户端。&lt;/p&gt;

&lt;p&gt;首先是安装 MPD，我曾经写过一篇简单介绍 &lt;a href=&#34;http://www.zfanw.com/blog/ubuntu-mpd-ncmpcpp.html&#34;&gt;MPD 与 Ncmpcpp 安装使用&lt;/a&gt;的内容，也可以查阅 &lt;a href=&#34;http://mpd.wikia.com/wiki/Music_Player_Daemon_Wiki&#34;&gt;Wikia 上 MPD 相关资料&lt;/a&gt; 进行安装配置。&lt;/p&gt;

&lt;p&gt;安装完 MPD 后是修改 mpd.conf 文件：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo gvim /etc/mpd.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;查找下列内容并修改结果如下：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#bind_to_address     &amp;quot;localhost&amp;quot;

bind_to_address    &amp;quot;0.0.0.0&amp;quot;  #这一行是新增加的内容

port    6600

audio_output {
    type        &amp;quot;httpd&amp;quot;
    name        &amp;quot;My HTTP Stream&amp;quot;        # 这个名称可任意修改
    encoder     &amp;quot;vorbis&amp;quot;        # optional, vorbis or lame
    port        &amp;quot;8000&amp;quot;
#   quality     &amp;quot;5.0&amp;quot;           # do not define if bitrate is defined
    bitrate     &amp;quot;128&amp;quot;           # do not define if quality is defined
    format      &amp;quot;44100:16:1&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;保存 mpd.conf 文件后需要重启 MPD:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo /etc/init.d/mpd restart
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;接着，从 Google Play 上下载 &lt;a href=&#34;https://play.google.com/store/apps/details?id=com.namelessdev.mpdroid&amp;amp;hl=en&#34;&gt;MPDroid 应用&lt;/a&gt;到手机，安装好打开，初始界面如下：&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://www.zfanw.com/blog/wp-content/uploads/2012/10/mpdroid-setting-168x300.jpg&#34; alt=&#34;mpdroid 初始界面&#34; title=&#34;mpdroid 初始设置界面&#34; width=&#34;168&#34;  class=&#34;alignnone size-medium wp-image-6017&#34; srcset=&#34;https://www.zfanw.com/blog/wp-content/uploads/2012/10/mpdroid-setting-168x300.jpg 168w, https://www.zfanw.com/blog/wp-content/uploads/2012/10/mpdroid-setting.jpg 480w&#34; sizes=&#34;(max-width: 168px) 100vw, 168px&#34; /&gt;&lt;/p&gt;

&lt;p&gt;选择 &amp;#8220;Default connection settings&amp;#8221;，另外一个是 &amp;#8220;Wlan based connection&amp;#8221;，可以针对不同的无线网络设置不同 ip：&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://www.zfanw.com/blog/wp-content/uploads/2012/10/mpdroid-wlan-setting-168x300.jpg&#34; alt=&#34;mpdroid 无线局域网设置&#34; title=&#34;mpdroid 设置无线局域网连接&#34; width=&#34;168&#34;  class=&#34;alignnone size-medium wp-image-6019&#34; srcset=&#34;https://www.zfanw.com/blog/wp-content/uploads/2012/10/mpdroid-wlan-setting-168x300.jpg 168w, https://www.zfanw.com/blog/wp-content/uploads/2012/10/mpdroid-wlan-setting.jpg 480w&#34; sizes=&#34;(max-width: 168px) 100vw, 168px&#34; /&gt;&lt;/p&gt;

&lt;p&gt;填写 &amp;#8220;Host&amp;#8221; 与 &amp;#8220;Streaming Host&amp;#8221;，这是 MPD 服务器所在的电脑的 ip 地址，比如我的电脑在局域网的 ip 为 192.168.1.101，Ubuntu 上可以通过以下命令查看：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ifconfig
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;因为 MPDroid 上使用 MPD 服务器所在电脑的 ip 地址来连接，所以电脑的 ip 最好手动分配，DHCP 分配的话每次的 ip 不同，就需要 MPDroid 设置里每次都做修改。&lt;/p&gt;

&lt;p&gt;设置完成后，通过按 Android 手机的 Menu 键打开 MPDroid 的 ”Main Menu&amp;#8221;，点击进入音乐控制的主界面：&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://www.zfanw.com/blog/wp-content/uploads/2012/10/mpdroid-playing1.jpg&#34; alt=&#34;mpdroid 播放音乐中&#34; title=&#34;mpdroid 控制播放音乐&#34; width=&#34;480&#34;  class=&#34;alignnone size-full wp-image-6028&#34; srcset=&#34;https://www.zfanw.com/blog/wp-content/uploads/2012/10/mpdroid-playing1.jpg 480w, https://www.zfanw.com/blog/wp-content/uploads/2012/10/mpdroid-playing1-168x300.jpg 168w&#34; sizes=&#34;(max-width: 480px) 100vw, 480px&#34; /&gt;&lt;/p&gt;

&lt;p&gt;一目了然的界面。&lt;/p&gt;

&lt;p&gt;要将 MPD 服务器上的音乐 streaming 到手机，即通过手机播放 MPD 服务器上的音乐，如下图所示，可以通过 Android 手机的 Menu 按键调用该菜单，勾选 streaming 就可以开始播放，如果没有声音，请点击上一张图片的&lt;strong&gt;音响&lt;/strong&gt;图标进入查看 OUTPUTS 是否勾选了名称为 &amp;#8220;My HTTP Stream&amp;#8221; 的声音输出。&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://www.zfanw.com/blog/wp-content/uploads/2012/10/mpdroid-playing-streaming.jpg&#34; alt=&#34;mpdroid streaming 播放中&#34; title=&#34;mpdroid-playing-streaming&#34; width=&#34;168&#34;  class=&#34;alignnone size-full wp-image-6024&#34; srcset=&#34;https://www.zfanw.com/blog/wp-content/uploads/2012/10/mpdroid-playing-streaming.jpg 480w, https://www.zfanw.com/blog/wp-content/uploads/2012/10/mpdroid-playing-streaming-168x300.jpg 168w&#34; sizes=&#34;(max-width: 480px) 100vw, 480px&#34; /&gt;&lt;/p&gt;

&lt;p&gt;这样，我就可以把手机当成电脑上音乐播放的遥控器；如果无聊，也可以同时在电脑和手机上播放音乐，不过如果在电脑/手机上同时播放时，因为 MPDroid 在手机上 streaming 会有缓冲，于是会慢电脑上几秒，结果就演成“二重唱”了。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Ubuntu 下使用 MPD 与 Ncmpcpp</title>
      <link>https://www.zfanw.com/blog/ubuntu-mpd-ncmpcpp.html</link>
      <pubDate>Tue, 11 Sep 2012 02:28:21 +0000</pubDate>
      
      <guid>https://www.zfanw.com/blog/ubuntu-mpd-ncmpcpp.html</guid>
      <description>&lt;div id=&#34;toc_container&#34; class=&#34;ml-l u-floatRight pure-u-1-1 pure-u-sm-2-5 toc_white no_bullets&#34;&gt;
  &lt;nav id=&#34;myaffix&#34;&gt;
  
  &lt;p class=&#34;toc-title&#34;&gt;
    目录
  &lt;/p&gt;
  
  &lt;ul class=&#34;toc-list nav&#34; role=&#34;menu&#34;&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_MPD_Ncmpcpp&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;1&lt;/span&gt; 安装 MPD 与 Ncmpcpp&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_MPD&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;2&lt;/span&gt; 配置 MPD&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_ncmpcpp&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;3&lt;/span&gt; 使用 ncmpcpp&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#i&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;4&lt;/span&gt; 鸣谢&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ul&gt;&lt;/nav&gt;
&lt;/div&gt;

&lt;div class=&#34;&#34;&gt;
  &lt;p&gt;
    先说个我作为新手使用 MPD 的一个经历，在启用 ncmpcpp 客户端播放《虫师》的音乐后，我退出 ncmpcpp，音乐仍在播放，我决定 log out 当前用户看看，它仍在播放，我心里大笑，想着说重启你总不会再播放了吧，关机那时显然是没了声音，等重启进入登录界面时，音乐继续。那个时候我觉得时光美好。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_MPD_Ncmpcpp&#34;&gt;安装 MPD 与 Ncmpcpp&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_MPD_Ncmpcpp&#34; href=&#34;#_MPD_Ncmpcpp&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    我的 Ubuntu 版本为 12.04,
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ sudo apt-get install mpd ncmpcpp
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_MPD&#34;&gt;配置 MPD&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_MPD&#34; href=&#34;#_MPD&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    打开 /etc/mpd.conf 文件，
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ sudo gvim /etc/mpd.conf
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    修改 music_directory 内容：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;music_directory     &#34;/home/sam/music&#34;
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    将其指向音乐文件夹即可。
  &lt;/p&gt;
  
  &lt;p&gt;
    并且注释掉以下内容：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;#audio_output {
#  type    &#34;alsa&#34;
#  name    &#34;Sound Card&#34;
#  device    &#34;hw:0,0&#34;  # optional
#  format    &#34;44100:16:2&#34;  # optional
#  mixer_device  &#34;default&#34; # optional
#  mixer_control &#34;PCM&#34;   # optional
#  mixer_index &#34;0&#34;   # optional
#}
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    增加如下内容：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;audio_output {
  type    &#34;pulse&#34;
  name    &#34;MPD&#34;
}
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    如果声音会有问题，将下一行的注释#符号去掉，没问题则忽略：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;#mixer_type &#34;software&#34;
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    保存 mpd.conf 文件并重启 mpd:
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ sudo /etc/init.d/mpd restart
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    又因为默认情况下 MPD 可能没有权限访问 PulseAudio，如下命令用于将它加入拥有访问权限的组中：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ sudo usermod -aG pulse,pulse-access mpd
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    这样，MPD 就以系统服务的形式在系统后台运行。
  &lt;/p&gt;
  
  &lt;p&gt;
    另外，如果要使用 tag editor，需要拷贝一份 config 文件到 ~/.ncmpcpp/ 下：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cd ~/.ncmpcpp
$ cp /usr/share/doc/ncmpcpp/examples/config.gz .
$ gunzip config.gz
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    打开 config 文件，将 mpd_music_dir 一行注释取消，并将值改为 /home/sam/music，即你的音乐文件夹。如果不做这一步，试图编辑音乐文件的 tag 时会出现错误：configuration variable mpd_music_dir is not set。
  &lt;/p&gt;
  
  &lt;p&gt;
    然后重启 mpd，进入 ncmpcpp 后按数字 7 即可以进入 tag editor。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_ncmpcpp&#34;&gt;使用 ncmpcpp&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_ncmpcpp&#34; href=&#34;#_ncmpcpp&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    Ncmpcpp 全称为 NCurses Music Player Client (Plus Plus)，界面与 Ncmpc 相近，但提供更多新特性，这也是加两个 Plus 的意思。另外，Ncmpcpp 只是 MPD 许多客户端中的一个，更多请见 &lt;a href=&#34;http://mpd.wikia.com/wiki/Clients&#34;&gt;http://mpd.wikia.com/wiki/Clients&lt;/a&gt;。
  &lt;/p&gt;
  
  &lt;p&gt;
    我们可以通过命令行输入 &lt;code&gt;ncmpcpp&lt;/code&gt; 启用它。
  &lt;/p&gt;
  
  &lt;h3&gt;
    更新数据库
  &lt;/h3&gt;
  
  &lt;p&gt;
    上面我们虽然为 MPD 配置了音乐文件夹位置，但数据库内并没有更新文件内容，这需要通过客户端来完成，在进入 ncmpcpp 后，我们可以按 u 键来更新数据库：
  &lt;/p&gt;
  
  &lt;p&gt;
    &lt;kbd&gt;u&lt;/kbd&gt; &amp;#8211; 更新音乐数据库
  &lt;/p&gt;
  
  &lt;p&gt;
    网络上还能看到 &lt;code&gt;mpd --create-db&lt;/code&gt; 这个命令，但这个命令在 MPD 最近版本中显然已经被取消。
  &lt;/p&gt;
  
  &lt;h3&gt;
    Ncmpcpp 常用快捷键
  &lt;/h3&gt;
  
  &lt;ul&gt;
    &lt;li&gt;
      &lt;kbd&gt;j&lt;/kbd&gt; &amp;#8211; 向下移动
    &lt;/li&gt;
    &lt;li&gt;
      &lt;kbd&gt;k&lt;/kbd&gt; &amp;#8211; 向上移动
    &lt;/li&gt;
    &lt;li&gt;
      &lt;kbd&gt;1&lt;/kbd&gt; &amp;#8211; 这是数字 1，打开帮助，可以查看各种快捷键的用法
    &lt;/li&gt;
    &lt;li&gt;
      &lt;kbd&gt;3&lt;/kbd&gt; &amp;#8211; Browser，可以查看音乐文件夹下的内容，在 Browser 里，可以按空格将文件加入播放列表，也可以按 Enter 键将文件加入播放列表并开始播放；如果要添加全部文件到播放列表，先按 a 键，然后 / 键，接着回车。
    &lt;/li&gt;
    &lt;li&gt;
      &lt;kbd&gt;2&lt;/kbd&gt; &amp;#8211; Playlist，播放列表，在播放列表中按 c 可以清空列表，按 d 可以删除条目，按 S 可以保存列表，小写 s 则是停止播放，P 是暂停播放，再按一次 P 继续播放
    &lt;/li&gt;
    &lt;li&gt;
      &lt;kbd&gt;l&lt;/kbd&gt; &amp;#8211; 这是字母，小写的 L，表示 lyric，取得歌词
    &lt;/li&gt;
    &lt;li&gt;
      &lt;kbd&gt;q&lt;/kbd&gt; &amp;#8211; 退出 ncmpcpp
    &lt;/li&gt;
  &lt;/ul&gt;
  
  &lt;p&gt;
    其实 Vim 里的许多快捷键都可以在 Ncmpcpp 中使用。
  &lt;/p&gt;
  
  &lt;p&gt;
    另外，Ncmpcpp 有几个让人郁结的地方，比如按 S 保存播放列表，输入几个字母后你改变主意不想保存了，想取消这个动作，抱歉，没有快捷键，只能按 &lt;kbd&gt;Ctrl-c&lt;/kbd&gt; 退出 ncmpcpp。
  &lt;/p&gt;
  
  &lt;p&gt;
    更多快捷键按 1 键进入帮助查看，更多配置可以参见以下链接。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;i&#34;&gt;鸣谢&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;heyi&#34; href=&#34;#i&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;ol&gt;
    &lt;li&gt;
      &lt;a href=&#34;https://help.ubuntu.com/community/MPD&#34;&gt;https://help.ubuntu.com/community/MPD&lt;/a&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;a href=&#34;https://wiki.archlinux.org/index.php/Ncmpcpp&#34;&gt;https://wiki.archlinux.org/index.php/Ncmpcpp&lt;/a&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;a href=&#34;http://ncmpcpp.rybczak.net/&#34;&gt;http://ncmpcpp.rybczak.net/&lt;/a&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;a href=&#34;https://bbs.archlinux.org/viewtopic.php?pid=1033566&#34;&gt;https://bbs.archlinux.org/viewtopic.php?pid=1033566&lt;/a&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;a href=&#34;http://manpages.ubuntu.com/manpages/lucid/man1/ncmpcpp.1.html&#34;&gt;http://manpages.ubuntu.com/manpages/lucid/man1/ncmpcpp.1.html&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>