<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>The_content on 陈三</title>
    <link>https://www.zfanw.com/blog/tags/the_content/</link>
    <description>Recent content in The_content on 陈三</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Tue, 04 Sep 2012 03:58:09 +0000</lastBuildDate>
    <atom:link href="https://www.zfanw.com/blog/tags/the_content/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>给 WordPress 博客外部链接添加小图标</title>
      <link>https://www.zfanw.com/blog/wordpress-external-link-icon-jquery.html</link>
      <pubDate>Tue, 04 Sep 2012 03:58:09 +0000</pubDate>
      
      <guid>https://www.zfanw.com/blog/wordpress-external-link-icon-jquery.html</guid>
      <description>

&lt;p&gt;我的博客里，凡外部链接，它的右侧都有个小图标，用于标示出站链接，比如 &lt;a href=&#34;http://wordpress.org/&#34;&gt;WordPress&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;最早打算使用 CSS 属性选择器，如下：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;.storycontent a{
    text-decoration:none;
    color:#000;
    padding-right:16px;
    background:url(http://www.zfanw.com/blog/wp-content/uploads/2012/08/icon_external.png)
        right center no-repeat;
}
.storycontent a[href^=&amp;quot;http://www.zfanw.com/blog&amp;quot;],
.storycontent a[href^=&amp;quot;#&amp;quot;]{
    background:none;
    padding-right:0;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;但这有个不足，IE6 不支持属性选择符(时至2013-10-25，你还要支持 IE6 吗，我真同情你)。&lt;/p&gt;

&lt;p&gt;另外一个办法，就是给外部链接加 class，比如 .external，然后赋予类某种样式，就没有浏览器兼容性问题。&lt;/p&gt;

&lt;p&gt;这个方法要用到 WordPress 的 filter，the_content。&lt;/p&gt;

&lt;p&gt;首先，在 functions.php 文件里创建一个函数 addExternalClass，用于过滤页面内容，之后再添加过滤勾子，这样内容在输出到屏幕前会按照我们的设定进行预处理：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;function addExternalClass($content) {
    $content = str_replace(&#39;&amp;lt;a href=&#39;, &#39;&amp;lt;a class=&amp;quot;external&amp;quot; href=&#39;, $content);
    //首先将页面里所有链接都加上 .external 类
    $content = str_replace(&#39;&amp;lt;a class=&amp;quot;external&amp;quot; href=&amp;quot;http://www.zfanw.com&#39;, &#39;&amp;lt;a href=&amp;quot;http://www.zfanw.com&#39;, $content);
    //将带本站 url 地址 http://www.zfanw.com 的链接的类 .external 移除。
    $content = str_replace(&#39;&amp;lt;a class=&amp;quot;external&amp;quot; href=&amp;quot;#&#39;, &#39;&amp;lt;a href=&amp;quot;#&#39;, $content);
    //将锚链接的 .external 类移除
    return $content;
    //返回处理过的内容
}
add_filter(&#39;the_content&#39;, &#39;addExternalClass&#39;);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;再之后，就是到 style.css 里给类 .external 写个规则：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;.external{
    text-decoration:none;
    border-bottom:1px dashed #333;
    color:#000;
    padding-right:16px;
    background:url(http://www.zfanw.com/blog/wp-content/uploads/2012/08/icon_external.png)
        right center no-repeat;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;如果要让外部链接在新窗口打开，过滤函数里加个 &amp;#8220;target=&amp;#8217;_blank&amp;rsquo;&amp;#8221; 就可以。&lt;/p&gt;

&lt;p&gt;第三种办法，通过 jQuery filter 函数选择所有外部链接并添加 .external 类：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;jQuery(&#39;a&#39;).filter(function() {
   return this.hostname &amp;amp;&amp;amp; this.hostname !== location.hostname;
}).addClass(&amp;quot;external&amp;quot;);
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;鸣谢&#34;&gt;鸣谢&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;http://codex.wordpress.org/Plugin_API/Filter_Reference/the_content&#34;&gt;http://codex.wordpress.org/Plugin_API/Filter_Reference/the_content&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://api.jquery.com/filter/&#34;&gt;http://api.jquery.com/filter/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://css-tricks.com/snippets/jquery/target-only-external-links/&#34;&gt;http://css-tricks.com/snippets/jquery/target-only-external-links/&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
    </item>
    
  </channel>
</rss>