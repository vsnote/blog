<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>字体设置 on 陈三</title>
    <link>https://www.zfanw.com/blog/tags/%E5%AD%97%E4%BD%93%E8%AE%BE%E7%BD%AE/</link>
    <description>Recent content in 字体设置 on 陈三</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Thu, 11 Oct 2012 05:36:31 +0000</lastBuildDate>
    <atom:link href="https://www.zfanw.com/blog/tags/%E5%AD%97%E4%BD%93%E8%AE%BE%E7%BD%AE/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Ubuntu 字体设置与 infinality</title>
      <link>https://www.zfanw.com/blog/ubuntu-font-render-with-infinality.html</link>
      <pubDate>Thu, 11 Oct 2012 05:36:31 +0000</pubDate>
      
      <guid>https://www.zfanw.com/blog/ubuntu-font-render-with-infinality.html</guid>
      <description>&lt;div id=&#34;toc_container&#34; class=&#34;ml-l u-floatRight pure-u-1-1 pure-u-sm-2-5 toc_white no_bullets&#34;&gt;
  &lt;nav id=&#34;myaffix&#34;&gt;
  
  &lt;p class=&#34;toc-title&#34;&gt;
    目录
  &lt;/p&gt;
  
  &lt;ul class=&#34;toc-list nav&#34; role=&#34;menu&#34;&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_fontconfig-infinality&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;1&lt;/span&gt; 安装 fontconfig-infinality 配置文件&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_freetype&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;2&lt;/span&gt; 给 freetype 源文件打补丁&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#i&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;3&lt;/span&gt; 其他设置内容&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#i-2&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;4&lt;/span&gt; 效果图&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#i-3&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;5&lt;/span&gt; 鸣谢&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ul&gt;&lt;/nav&gt;
&lt;/div&gt;

&lt;div class=&#34;&#34;&gt;
  &lt;p&gt;
    &lt;strong&gt;说明 2013.11.28&lt;/strong&gt;：本文写于2012年，内容与最新的 infinality 可能不一样，如有出入，请以官网说明为准。
  &lt;/p&gt;
  
  &lt;p&gt;
    我眼神不大好。见着别人说操作系统的字体可以渲染得怎样清晰和好看，但身边没有样例，就只好发挥自己的想象力。可惜实在想不出来，就找相关图片看了下，确实要比 Ubuntu 默认下的清晰、好看。
  &lt;/p&gt;
  
  &lt;p&gt;
    于是想尝试一下，就找来 infinality &amp;#8211; 这是因为在推上见&lt;a href=&#34;https://twitter.com/doublechou&#34;&gt;玛丽苏&lt;/a&gt;提过。结果先是不小心把 /etc/fonts/conf.d 文件夹给删了，当时还没想着处理，只一味担心重启系统后会出问题，结果发现，Ubuntu 竟然还能启动，还能打出中文，只是字体变了样子，与原来见的不一样，如下：
  &lt;/p&gt;
  
  &lt;p&gt;
    &lt;a href=&#34;http://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-09-233813.png&#34;&gt;&lt;img src=&#34;http://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-09-233813.png&#34; alt=&#34;删除 /etc/fonts/conf.d 后的字体&#34; title=&#34;Screenshot from 2012-10-09 23:38:13&#34; width=&#34;617&#34;  class=&#34;alignnone size-full wp-image-6154&#34; srcset=&#34;https://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-09-233813.png 617w, https://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-09-233813-300x70.png 300w&#34; sizes=&#34;(max-width: 617px) 100vw, 617px&#34; /&gt;&lt;/a&gt;
  &lt;/p&gt;
  
  &lt;p&gt;
    接着找了些资料，心里约摸觉得把 fontconfig-config 包重装一下就好：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ sudo apt-get --reinstall install fontconfig-config
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    切换到 etc/fonts/ 目录下，果然出来 conf.d 文件夹，重启系统，字体如下图：
  &lt;/p&gt;
  
  &lt;p&gt;
    &lt;a href=&#34;http://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-09-234606.png&#34;&gt;&lt;img src=&#34;http://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-09-234606.png&#34; alt=&#34;ubuntu字体设置&#34; title=&#34;Screenshot from 2012-10-09 23:46:06&#34; width=&#34;542&#34;  class=&#34;alignnone size-full wp-image-6155&#34; srcset=&#34;https://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-09-234606.png 542w, https://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-09-234606-300x153.png 300w&#34; sizes=&#34;(max-width: 542px) 100vw, 542px&#34; /&gt;&lt;/a&gt;
  &lt;/p&gt;
  
  &lt;p&gt;
    你可能要问：有区别吗？抱歉，这真是难到我了。
  &lt;/p&gt;
  
  &lt;p&gt;
    在我来看，这两张 GVIM 截图并没什么区别，大概是 GVIM 渲染方法不同，又或者我选择的字型的问题。不过在网页里，前后的区别倒一眼就能看出。不过不曾截图。
  &lt;/p&gt;
  
  &lt;p&gt;
    以下进入正题，&lt;strong&gt;Ubuntu&lt;/strong&gt; 下如何使用 &lt;strong&gt;infinality&lt;/strong&gt; 美化字体。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_fontconfig-infinality&#34;&gt;安装 fontconfig-infinality 配置文件&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_fontconfig-infinality&#34; href=&#34;#_fontconfig-infinality&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    首先，到 infinality 网站下载两个压缩包：
  &lt;/p&gt;
  
  &lt;ol&gt;
    &lt;li&gt;
      &lt;a href=&#34;http://www.infinality.net/fedora/linux/zips/freetype-infinality-2.4.10-20120616_01-x86_64.tar.bz2&#34;&gt;freetype-infinality-2.4.10-20120616_01-x86_64.tar.bz2&lt;/a&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;a href=&#34;http://www.infinality.net/fedora/linux/zips/fontconfig-infinality-1-20120615_1.tar.bz2&#34;&gt;fontconfig-infinality-1-20120615_1.tar.bz2&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
  
  &lt;p&gt;
    譬如都下载到 ~/Downloads 目录下，将 fontconfig-infinality 压缩包解压到 /etc/fonts/ 目录下：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cd ~/Downloads
$ tar -jfxv fontconfig-infinality-1-20120615_1.tar.bz2 -C /etc/fonts/
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    这样，/etc/fonts/ 目录下会出现一个子目录 infinality。
  &lt;/p&gt;
  
  &lt;p&gt;
    根据 infinality 目录下 README 的说明，需要为 /etc/fonts/conf.d/ 下的 52-infinality-conf 创建一个软链接(symlink)指向 /etc/fonts/infinality/ 下的 infinality.conf：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cd /etc/fonts/conf.d/
$ sudo ln -sf ../infinality/infinality.conf 52-infinality-conf
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    接着是调整 /etc/fonts/infinality/infinality.conf 文件配置，这是一个 XML 文件，可以手动修改，也可以通过运行 infinality 目录下的 infctl.sh 来设置：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cd /etc/fonts/infinality
$ sudo ./infctl.sh setstyle
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    这时会弹出 8 个预设值供你选择: 1) debug 2) infinality 3) linux 4) osx 5) osx2 6) win7 7) win98 8) winxp
  &lt;/p&gt;
  
  &lt;p&gt;
    比如我选择 2，然后按 Enter 确认，会出现一个结果信息：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;conf.d -&amp;gt; styles.conf.avail/infinality
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    这是修改了一个软链接指向。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_freetype&#34;&gt;给 freetype 源文件打补丁&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_freetype&#34; href=&#34;#_freetype&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    从 &lt;a href=&#34;http://download.savannah.gnu.org/releases/freetype/&#34;&gt;freetype 网站&lt;/a&gt; 下载 freetype 2.4.10 最新版，假设压缩包名称为 freetype-2.4.10.tar.gz，下载到 ~/Downloads 目录下。将其解压到 ~ 目录下：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cd 
$ tar -xvzf ~/Downloads/freetype-2.4.10.tar.gz -C .
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    解压出来的新目录名为 freetype-2.4.10。
  &lt;/p&gt;
  
  &lt;p&gt;
    接着解压 freetype-infinality-2.4.10-20120616_01-x86_64.tar.bz2 压缩包到 ~/bin/ 目录下，当然，要解压到其他地方也无所谓，如果目录不存在，请先建立一个：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cd ~
$ mkdir bin
$ cd bin
$ tar -xvjf ~/Downloads/freetype-infinality-2.4.10-20120616_01-x86_64.tar.bz2 -C .
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    现在文件都已经备齐，接下来就是开始打补丁：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cd ~/freetype-2.4.10
$ patch -p1 &amp;lt; ~/bin/freetype-add-subpixel-hinting-infinality-20120616-01.patch 
$ patch -p1 &amp;lt; ~/bin/freetype-enable-subpixel-hinting-infinality-20120615-01.patch 
$ patch -p1 &amp;lt; ~/bin/freetype-entire-infinality-patchset-20120615-01.patch 
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    这样，就给 freetype 源文件打好 finality 的补丁。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;i&#34;&gt;其他设置内容&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;heyi&#34; href=&#34;#i&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    接下来，还要进行一些设置，仍是在 freetype-2.4.10 目录下操作：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ ./configure
$ make
$ sudo mkdir /usr/lib/freetype-infinality/        # 如果跑 64 位系统就把 lib 改成 lib64
$ sudo find . -name libfreetype.so.6.9.0 -exec mv {} /usr/lib/freetype-infinality/ \;
$ cd /usr/lib/freetype-infinality
$ sudo ln -s libfreetype.so.6.9.0 libfreetype.so.6
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    在 ~/bin/ 目录下有两个文件，根据建议需要拷贝到 /etc/profile.d/ 目录下：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cd ~/bin
$ sudo cp infinality-settings.sh freetype-infinality.sh /etc/profile.d/
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    /etc/profile.d/infinality-settings.sh 这个文件里可以做很多设置，具体根据个人需要进行修改。
  &lt;/p&gt;
  
  &lt;p&gt;
    接着，登出系统再登入，最好是重启系统。
  &lt;/p&gt;
  
  &lt;p&gt;
    不过根据我的经历，将这两个文件拷入 /etc/profilde.d/ 目录后重启系统，差一点都登录不进来，输入密码后迅速地闪了一下屏幕，就又回到登录界面 。后来切换到 tty 下移除这两个文件，这才算进来了，目测没这两个文件 infinality 也起作用，另外，如果只拷贝 infinality-settings.sh 到 /etc/profile.d/ 目录下是没问题的。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;i-2&#34;&gt;效果图&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;heyi-2&#34; href=&#34;#i-2&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    &lt;a href=&#34;http://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-10-024510.png&#34;&gt;&lt;img src=&#34;http://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-10-024510.png&#34; alt=&#34;ubuntu 字体设置 infinality&#34; title=&#34;ubuntu 字体设置效果&#34; width=&#34;541&#34;  class=&#34;alignnone size-full wp-image-6182&#34; srcset=&#34;https://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-10-024510.png 541w, https://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-10-024510-300x87.png 300w&#34; sizes=&#34;(max-width: 541px) 100vw, 541px&#34; /&gt;&lt;/a&gt;
  &lt;/p&gt;
  
  &lt;p&gt;
    在其他不曾设置过的屏幕上，将上图与图片上下的文字显示效果对比一下就知道，这字体设置是否成功。最明显的，是字的锯齿不那么了然，每个字像是一笔一划写出来的，而不是点点点组成。这也就是 infinality 的目的之一：&lt;q&gt;freely provide the nicest font rendering of any operating system.&lt;/q&gt;
  &lt;/p&gt;
  
  &lt;p&gt;
    这样，我们就完成 Ubuntu 系统下的字体设置，即字体渲染的方法的调整，接下来可以针对不同程序进行字型(font)的选择，这就根据个人喜好，没什么规则可言。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;i-3&#34;&gt;鸣谢&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;heyi-3&#34; href=&#34;#i-3&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;ol&gt;
    &lt;li&gt;
      &lt;a href=&#34;http://www.infinality.net/forum/viewtopic.php?f=2&amp;t=77#p794&#34;&gt;infinality.net 上的安装说明&lt;/a&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;a href=&#34;http://forums.opensuse.org/ae-ae-chinese/aes-aeoe-e-e-ae-zae-aeoe/c-ae-zae-aeoe/470464-opensuse-c-aeoe-oec-zcs-ae-ae-az-e-c-i-oec-ae-mactype.html&#34;&gt;openSUSE 论坛的相关内容&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>