<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Linode on 陈三</title>
    <link>https://www.zfanw.com/blog/tags/linode/</link>
    <description>Recent content in Linode on 陈三</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Sat, 03 Jan 2015 06:20:45 +0000</lastBuildDate>
    <atom:link href="https://www.zfanw.com/blog/tags/linode/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Linode vps 安装配置 Ghost</title>
      <link>https://www.zfanw.com/blog/linode-vps-install-ghost.html</link>
      <pubDate>Sat, 03 Jan 2015 06:20:45 +0000</pubDate>
      
      <guid>https://www.zfanw.com/blog/linode-vps-install-ghost.html</guid>
      <description>&lt;div id=&#34;toc_container&#34; class=&#34;ml-l u-floatRight pure-u-1-1 pure-u-sm-2-5 toc_white no_bullets&#34;&gt;
  &lt;nav id=&#34;myaffix&#34;&gt;
  
  &lt;p class=&#34;toc-title&#34;&gt;
    目录
  &lt;/p&gt;
  
  &lt;ul class=&#34;toc-list nav&#34; role=&#34;menu&#34;&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_Ghost&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;1&lt;/span&gt; 安装 Ghost&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_Apache_Ghost&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;2&lt;/span&gt; 配置 Apache 与 Ghost&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ul&gt;&lt;/nav&gt;
&lt;/div&gt;

&lt;div class=&#34;&#34;&gt;
  &lt;p&gt;
    我的 vps 情况：
  &lt;/p&gt;
  
  &lt;ul&gt;
    &lt;li&gt;
      操作系统 &amp;#8211; CentOS 7 64 位
    &lt;/li&gt;
    &lt;li&gt;
      web 服务器软件 &amp;#8211; Apache
    &lt;/li&gt;
  &lt;/ul&gt;
  
  &lt;p&gt;
    Ghost&lt;fnref target=&#34;14873.1&#34; /&gt; 基于 Node.js，它本身自带 web 服务器，不需要 Apache。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_Ghost&#34;&gt;安装 Ghost&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_Ghost&#34; href=&#34;#_Ghost&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    主要参照 Ghost 官方帮助&lt;fnref target=&#34;14873.2&#34; /&gt;。
  &lt;/p&gt;
  
  &lt;ol&gt;
    &lt;li&gt;
      &lt;p&gt;
        下载 Ghost
      &lt;/p&gt;
      
      &lt;pre&gt;&lt;code&gt;$ curl -L https://ghost.org/zip/ghost-latest.zip -o ghost.zip
&lt;/code&gt;&lt;/pre&gt;
    &lt;/li&gt;
    
    &lt;li&gt;
      &lt;p&gt;
        解压 Ghost
      &lt;/p&gt;
      
      &lt;pre&gt;&lt;code&gt;$ unzip -uo ghost.zip -d ghost
&lt;/code&gt;&lt;/pre&gt;
    &lt;/li&gt;
    
    &lt;li&gt;
      &lt;p&gt;
        安装 Ghost
      &lt;/p&gt;
      
      &lt;pre&gt;&lt;code&gt;$ cd ghost
$ npm install --production
&lt;/code&gt;&lt;/pre&gt;
    &lt;/li&gt;
    
    &lt;li&gt;
      &lt;p&gt;
        启动 Ghost
      &lt;/p&gt;
      
      &lt;pre&gt;&lt;code&gt;$ npm start --production
&lt;/code&gt;&lt;/pre&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
  
  &lt;p&gt;
    现在，你可以在 vps 上通过 &lt;code&gt;127.0.0.1:2368&lt;/code&gt; 路径访问到 Ghost 博客了。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_Apache_Ghost&#34;&gt;配置 Apache 与 Ghost&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_Apache_Ghost&#34; href=&#34;#_Apache_Ghost&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    当然，你的目的可不是在 vps 上访问 Ghost，而是通过域名访问 Ghost。
  &lt;/p&gt;
  
  &lt;p&gt;
    ghost 目录下有一个 &lt;code&gt;config.example.js&lt;/code&gt; 文件，用于配置相关信息&lt;fnref target=&#34;14873.3&#34; /&gt;，比如域名，端口等。
  &lt;/p&gt;
  
  &lt;p&gt;
    执行以下操作前，请先确保你在 DNS 服务器上把域名绑定到 vps 的 ip 地址。
  &lt;/p&gt;
  
  &lt;ol&gt;
    &lt;li&gt;
      &lt;p&gt;
        复制一个 config.js
      &lt;/p&gt;
      
      &lt;pre&gt;&lt;code&gt;$ cd ghost
$ cp config.example.js config.js
&lt;/code&gt;&lt;/pre&gt;
    &lt;/li&gt;
    
    &lt;li&gt;
      &lt;p&gt;
        修改 config.js
      &lt;/p&gt;
      
      &lt;p&gt;
        将 config.js 里 production 部分里的 &lt;code&gt;url: &#39;http://my-ghost-blog.com&#39;&lt;/code&gt; 改为 &lt;code&gt;url: &#39;http://example.com&#39;&lt;/code&gt;。
      &lt;/p&gt;
    &lt;/li&gt;
    
    &lt;li&gt;
      &lt;p&gt;
        重启 Ghost
      &lt;/p&gt;
      
      &lt;p&gt;
        按 &lt;kbd&gt;Ctrl - C&lt;/kbd&gt; 关闭 Ghost，再执行 &lt;code&gt;npm start --production&lt;/code&gt; 启动它。
      &lt;/p&gt;
      
      &lt;p&gt;
        这时你能看到如下信息：
      &lt;/p&gt;
      
      &lt;pre&gt;&lt;code&gt;Migrations: Up to date at version 003
Ghost is running... 
Your blog is now available on http://example.com 
Ctrl+C to shut down
&lt;/code&gt;&lt;/pre&gt;
      
      &lt;p&gt;
        但这信息并不意味着我们能访问到 Ghost 了。因为 example.com 域名访问的是 80 端口，在这个端口上监听的是 Apache 而不是 Node.js &amp;#8211; 它是在 2368 端口监听着。
      &lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
  
  &lt;p&gt;
    所以我们还需要配置 Apache。
  &lt;/p&gt;
  
  &lt;p&gt;
    打开 &lt;code&gt;/etc/httpd/conf.d/vhost.conf&lt;/code&gt; 文件（CentOS 系统的情况），添加如下内容：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt; &amp;lt;VirtualHost *:80&amp;gt;
     ServerName www.frontbin.com
     ServerAlias frontbin.com
     ProxyPreserveHost on
     ProxyPass / http://localhost:2368/
     ProxyPassReverse / http://localhost:2368/
 &amp;lt;/VirtualHost&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    重启 apache：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ sudo service httpd restart 
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    这样，Apache 充当代理，会把它监听到的流量转发给 Node.js 监听的端口，这时访问 http://example.com，我们就能打开 Ghost 博客了。
  &lt;/p&gt;
  
  &lt;footnotes&gt;
    &lt;fn name=&#34;14873.1&#34;&gt;
      &lt;p&gt;
        &lt;a href=&#34;https://ghost.org/&#34;&gt;Ghost &amp;#8211; Just a blogging platform&lt;/a&gt;
      &lt;/p&gt;
    &lt;/fn&gt;
    
    &lt;fn name=&#34;14873.2&#34;&gt;
      &lt;p&gt;
        &lt;a href=&#34;http://support.ghost.org/installing-ghost-linux/&#34;&gt;Installing Ghost on Linux &amp;#8211; Ghost SupportGhost Support&lt;/a&gt;
      &lt;/p&gt;
    &lt;/fn&gt;
    
    &lt;fn name=&#34;14873.3&#34;&gt;
      &lt;p&gt;
        &lt;a href=&#34;http://support.ghost.org/config/&#34;&gt;Configuring Ghost &amp;#8211; Ghost SupportGhost Support&lt;/a&gt;
      &lt;/p&gt;
    &lt;/fn&gt;
  &lt;/footnotes&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Linode 下 openSUSE 系统 FQDN 设置</title>
      <link>https://www.zfanw.com/blog/linode-opensuse-fully-qualified-domain-name.html</link>
      <pubDate>Fri, 24 Oct 2014 12:54:59 +0000</pubDate>
      
      <guid>https://www.zfanw.com/blog/linode-opensuse-fully-qualified-domain-name.html</guid>
      <description>&lt;div id=&#34;toc_container&#34; class=&#34;ml-l u-floatRight pure-u-1-1 pure-u-sm-2-5 toc_white no_bullets&#34;&gt;
  &lt;nav id=&#34;myaffix&#34;&gt;
  
  &lt;p class=&#34;toc-title&#34;&gt;
    目录
  &lt;/p&gt;
  
  &lt;ul class=&#34;toc-list nav&#34; role=&#34;menu&#34;&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_hostname&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;1&lt;/span&gt; 设置 hostname&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_FQDN&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;2&lt;/span&gt; 设置 FQDN&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ul&gt;&lt;/nav&gt;
&lt;/div&gt;

&lt;div class=&#34;&#34;&gt;
  &lt;p&gt;
    Ubuntu 的势力已经大到超出我想象，所以 &lt;a href=&#34;https://www.linode.com/docs/getting-started#update-etchosts&#34;&gt;Linode 教程&lt;/a&gt;中没有提及 openSUSE 下的情况也就没觉得奇怪。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_hostname&#34;&gt;设置 hostname&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_hostname&#34; href=&#34;#_hostname&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    其实我也好奇，为什么 VPS 需要设置 hostname。估计是为了好看，或者可移植性。譬如未设置前，&lt;code&gt;hostname -v&lt;/code&gt; 显示的是 li-memeberxxx 之类的，设置后，主机名显得个性化了，另外换服务器的话，主机名不会变化 &amp;#8211; 这只是我的揣测。
  &lt;/p&gt;
  
  &lt;p&gt;
    openSUSE 下设置 hostname，跟 linode 教程中的 Ubuntu 部分略近：
  &lt;/p&gt;
  
  &lt;ol&gt;
    &lt;li&gt;
      &lt;code&gt;sudo vi /etc/hostname&lt;/code&gt; &amp;#8211; 创建一个 hostname 文件，在其中输入 &lt;code&gt;orchid&lt;/code&gt;，这个名称随你写，你爱什么写什么
    &lt;/li&gt;
    &lt;li&gt;
      &lt;code&gt;hostname -F /etc/hostname&lt;/code&gt; &amp;#8211; 设定 hostname，名称为 /etc/hostname 文件内容
    &lt;/li&gt;
  &lt;/ol&gt;
  
  &lt;p&gt;
    再查看 &lt;code&gt;hostname -v&lt;/code&gt; 结果，已经变成 &lt;code&gt;orchid&lt;/code&gt;。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_FQDN&#34;&gt;设置 FQDN&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_FQDN&#34; href=&#34;#_FQDN&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    &lt;a href=&#34;http://en.wikipedia.org/wiki/Fully_qualified_domain_name&#34;&gt;FQDN&lt;/a&gt; 的全称是 &amp;#8220;fully qualified domain name&amp;#8221;，为什么要设置它？又是一个诡异的问题。且不管它。
  &lt;/p&gt;
  
  &lt;p&gt;
    &lt;code&gt;sudo vi /etc/hosts&lt;/code&gt; 打开 hosts 文件，添加一行：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;12.34.56.78 orchid.zfanw.com orchid
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    第一部分即你的服务器 IP 地址，第二部分即是 FQDN 了，第三部分是前面设置的 hostname。
  &lt;/p&gt;
  
  &lt;p&gt;
    注意，&lt;code&gt;orchid.zfanw.com&lt;/code&gt; 需要做域名解析，A 记录绑定到服务器 IP &amp;#8211; 这样主机外部访问时就可以解析到。
  &lt;/p&gt;
  
  &lt;p&gt;
    之后再执行 &lt;code&gt;hostname -f&lt;/code&gt; 查看 FQDN 值，输出的是：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;orchid.zfanw.com
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    有时会需要重启 Apache 服务，则执行如下命令：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;sudo rcapache2 restart
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    最后，当然是贴一下我的&lt;a href=&#34;https://www.linode.com/?r=c1160d4e51485f11b9ae6b4cf286ebf455f87613&#34;&gt;推广链接&lt;/a&gt;。我不太记得好处是什么，大致是你从这链接点击注册使用 3 个月以上，我得到一定的返现，这返现足够我吃十顿快餐吧。
  &lt;/p&gt;
  
  &lt;p&gt;
    附：&lt;a href=&#34;http://www.zfanw.com/blog/linode-fqdn-hostname.html&#34;&gt;Linode FQDN 设置 – 陈三&lt;/a&gt;
  &lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Linode FQDN 设置</title>
      <link>https://www.zfanw.com/blog/linode-fqdn-hostname.html</link>
      <pubDate>Thu, 01 Nov 2012 13:41:51 +0000</pubDate>
      
      <guid>https://www.zfanw.com/blog/linode-fqdn-hostname.html</guid>
      <description>&lt;p&gt;&lt;a href=&#34;http://en.wikipedia.org/wiki/Fully_qualified_domain_name&#34;&gt;FQDN&lt;/a&gt; 全称叫 Fully qualified domain name，举个例子：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;www.zfanw.com
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;其中 www 是主机名即英文的 &lt;a href=&#34;http://library.linode.com/getting-started#sph_setting-the-hostname&#34;&gt;hostname&lt;/a&gt;，表示域名指向的是 World-Wide Web 服务器，简单地说，可以把它理解成计算机的名称。比如我 Ubuntu 的计算机名称叫 Sam，登录的用户名为 sam，则打开 terminal emulator，命令行上能看到 &lt;code&gt;sam@Sam&lt;/code&gt;，表示 Sam 计算机上的 sam 用户目前正在使用中。如果是 Windows 系统，则可以通过系统属性查看“完整的计算机名”，如果你有打开过 Windows 网上邻居，经常能看到各种五花八门的计算机名，这些就是所谓的 hostname。&lt;/p&gt;

&lt;p&gt;zfanw 是二级域名(&lt;a href=&#34;http://en.wikipedia.org/wiki/Second-level_domain&#34;&gt;Second-Level domain&lt;/a&gt;)，.com 是顶级域名(&lt;a href=&#34;http://en.wikipedia.org/wiki/Top-level_domain&#34;&gt;Top-Level domain&lt;/a&gt;)，类似的顶级域名还有 .org、.net 等。&lt;/p&gt;

&lt;p&gt;至于平时常见的 http，它是个互联网协议，类似的还有 ftp 等，这个与 FQDN 倒是无关。&lt;/p&gt;

&lt;p&gt;在 Linode VPS 文档中，有一节写的是&lt;a href=&#34;http://library.linode.com/getting-started#sph_setting-the-hostname&#34;&gt;设置 hostname&lt;/a&gt;。因为这个设置与后期安装 Apache 有关，所以有此一篇说明。&lt;/p&gt;

&lt;p&gt;Linode 的这节文档中给出的设置 /etc/hosts 文件的参考例子是：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;127.0.0.1        localhost.localdomain    localhost
12.34.56.78      plato.example.com        plato
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;其中 plato 是主机名，plato.example.com 正是所谓的 FQDN，这需要你先通过 DNS 设置绑定一个子域名到你的 Linode 服务器 ip 上。&lt;/p&gt;

&lt;p&gt;比如我可以到我的域名商 DNS 面板做一个 A 记录，解析 plato.zfanw.com 到 xxx.xxx.xxx.xx 这个 ip 地址，即 Linode 服务器的 ip 上。&lt;/p&gt;

&lt;p&gt;然后到 /etc/hosts 文件中增加如下一行：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;xxx.xxx.xxx.xxx plato.zfanw.com plato
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;参考例子中，localhost 应该是个特殊的主机名，如果你是第一次通过 ssh 登录到 Linode 服务器，可以看到 shell prompt 显示的是 &lt;code&gt;root@localhost&lt;/code&gt;，按我粗浅的理解，localdomain 应该也是个特殊域名。不过这两个我们可以不用管，默认即可。&lt;/p&gt;

&lt;p&gt;保存 /etc/hosts 文件后 logout 出服务器，再登录可以看到，shell prompt 已经变成 root@plato 而非 root@localhost。&lt;/p&gt;

&lt;p&gt;使用命令 &lt;code&gt;hostname --fqdn&lt;/code&gt; 显示的结果是 &amp;#8220;plato.zfanw.com&amp;#8221;。&lt;/p&gt;

&lt;p&gt;这样，就完成了 Linode FQDN 的设置。如果光设置 hostname 且更新 /etc/hosts 内容而不曾解析二级域名，后期在安装完 Apache 后重启会出现如下错误：&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;apache2: apr_sockaddr_info_get() failed for plato&lt;/p&gt;

&lt;p&gt;apache2: Could not reliably determine the server&amp;#8217;s fully qualified domain name, using 127.0.0.1 for ServerName&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;对的，我折腾这一篇纯是因为这个错误，不然我实在懒得再开 DNS 解析一个二级域名。因为 Linode 明明已经有个 FQDN，&lt;a href=&#34;http://forum.linode.com/viewtopic.php?f=19&amp;amp;t=8378&#34;&gt;lixxx-y.members.linode.com 这样的格式&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;&lt;del&gt;最后附一个我的 &lt;a href=&#34;https://www.linode.com/?r=c1160d4e51485f11b9ae6b4cf286ebf455f87613&#34;&gt;Linode Referal URL&lt;/a&gt;，作用是如果你通过这个 URL 购买了 Linode 服务器并且使用达 3 个月以上，我就可以收到 Linode 返还的 $20 美金，相当于 Linode 512 套餐一个月的价格，如果吃快餐的话，可以吃上 10 顿左右，下馆子大概一次搞定 &amp;#8211; 当然，如果你在厦门，我不介意一起下馆子，反正，花的是 Linode 的钱。&lt;/del&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>