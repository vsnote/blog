<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Infinality on 陈三</title>
    <link>https://www.zfanw.com/blog/tags/infinality/</link>
    <description>Recent content in Infinality on 陈三</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Fri, 22 Nov 2013 13:57:23 +0000</lastBuildDate>
    <atom:link href="https://www.zfanw.com/blog/tags/infinality/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>openSUSE 上的 infinality</title>
      <link>https://www.zfanw.com/blog/opensuse-infinality.html</link>
      <pubDate>Fri, 22 Nov 2013 13:57:23 +0000</pubDate>
      
      <guid>https://www.zfanw.com/blog/opensuse-infinality.html</guid>
      <description>&lt;div id=&#34;toc_container&#34; class=&#34;ml-l u-floatRight pure-u-1-1 pure-u-sm-2-5 toc_white no_bullets&#34;&gt;
  &lt;nav id=&#34;myaffix&#34;&gt;
  
  &lt;p class=&#34;toc-title&#34;&gt;
    目录
  &lt;/p&gt;
  
  &lt;ul class=&#34;toc-list nav&#34; role=&#34;menu&#34;&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_FreeType&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;1&lt;/span&gt; 下载 FreeType&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_freetype-infinality&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;2&lt;/span&gt; 下载 freetype-infinality&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_freetype&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;3&lt;/span&gt; 给 freetype 文件打补丁&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_fontconfig-infinality&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;4&lt;/span&gt; 下载 fontconfig-infinality&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#i&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;5&lt;/span&gt; 问题汇&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ul&gt;&lt;/nav&gt;
&lt;/div&gt;

&lt;div class=&#34;&#34;&gt;
  &lt;p&gt;
    &lt;strong&gt;简快版&lt;/strong&gt;，仅需要三步：
  &lt;/p&gt;
  
  &lt;ol&gt;
    &lt;li&gt;
      安装 &lt;a href=&#34;https://build.opensuse.org/package/show/home:opensuse_zh/freetype2&#34;&gt;freetype2&lt;/a&gt;
    &lt;/li&gt;
    &lt;li&gt;
      安装 &lt;a href=&#34;https://software.opensuse.org/package/fontconfig-infinality?search_term=fontconfig-infinality&#34;&gt;fontconfig infinality&lt;/a&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;code&gt;cd /etc/fonts/infinality&lt;/code&gt;，执行 &lt;code&gt;./infctl.sh setstyle&lt;/code&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
  
  &lt;p&gt;
    以前用 Ubuntu 时，在系统上折腾过 &lt;a href=&#34;http://www.zfanw.com/blog/ubuntu-font-render-with-infinality.html&#34;&gt;infinality&lt;/a&gt;，字体渲染的效果要比系统默认的好很多。最近&lt;a href=&#34;http://www.zfanw.com/blog/opensuse-upgrade-12-3-to-13-1.html&#34;&gt;升级 openSUSE 到13.1&lt;/a&gt;，感觉字体太细，看得不很舒服，就想起 infinality。
  &lt;/p&gt;
  
  &lt;p&gt;
    opensuse_zh 中文源上有提供 &lt;a href=&#34;https://build.opensuse.org/package/show/home:opensuse_zh/freetype2&#34;&gt;freetype2&lt;/a&gt;，不过我看它13.1版本下的 build 状态是 failed，所以没有尝试。所以最后仍是根据官网上的&lt;a href=&#34;http://www.infinality.net/forum/viewtopic.php?f=2&amp;t=77&#34;&gt;说明&lt;/a&gt;配置的。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_FreeType&#34;&gt;下载 FreeType&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_FreeType&#34; href=&#34;#_FreeType&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    从 FreeType 官网下载 &lt;a href=&#34;http://download.savannah.gnu.org/releases/freetype/&#34;&gt;freetype 2.4.12&lt;/a&gt;。FreeType 现在已经出到2.5版本，但出于安全考虑，还是照作者说的做，下载2.4.12版本。
  &lt;/p&gt;
  
  &lt;p&gt;
    我在 /home/sam/ 目录下建了个 fonts 目录，将 freetype 压缩包解压到 fonts 目录里。
  &lt;/p&gt;
  
  &lt;p&gt;
    现在的 fonts 目录结构如下：
  &lt;/p&gt;
  
  &lt;blockquote&gt;
    &lt;p&gt;
      &amp;#45; fonts
    &lt;/p&gt;
    
    &lt;p&gt;
      ++ freetype-2.4.12
    &lt;/p&gt;
  &lt;/blockquote&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_freetype-infinality&#34;&gt;下载 freetype-infinality&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_freetype-infinality&#34; href=&#34;#_freetype-infinality&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    从 infinality &lt;a href=&#34;http://www.infinality.net/blog/infinality-freetype-patches/&#34;&gt;页面&lt;/a&gt; 下载 freetype-infinality-2.4.12-20130514_01-x86_64.tar.bz2 文件，同样解压到 fonts 目录下，fonts 目录结构现在如下：
  &lt;/p&gt;
  
  &lt;blockquote&gt;
    &lt;p&gt;
      &amp;#45; fonts
    &lt;/p&gt;
    
    &lt;p&gt;
      &amp;#43;+ freetype-2.4.12
    &lt;/p&gt;
    
    &lt;p&gt;
      &amp;#43;+ freetype-infinality-2.4.12-20130514_01-x86_64
    &lt;/p&gt;
  &lt;/blockquote&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_freetype&#34;&gt;给 freetype 文件打补丁&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_freetype&#34; href=&#34;#_freetype&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cd /home/sam/fonts/freetype-2.4.12

$ patch -p1 &amp;lt; ../freetype-infinality-2.4.12-20130514_01-x86_64/freetype-entire-infinality-patchset-20130514-01.patch
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    接下来是 make(以下命令全部来自 infinality 说明)：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ ./configure

$ make

$ sudo mkdir /usr/lib/freetype-infinality/ #64位系统上把 lib 改成 lib64

$ sudo find . -name libfreetype.so.6.10.1 -exec mv {} /usr/lib/freetype-infinality/  \;       

$ cd /usr/lib/freetype-infinality

$ sudo ln -s libfreetype.so.6.10.1 libfreetype.so.10
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    我的系统下，在 &lt;code&gt;./configure&lt;/code&gt; 一步就报错：
  &lt;/p&gt;
  
  &lt;blockquote&gt;
    &lt;p&gt;
      configure: error: no acceptable C compiler found in $PATH
    &lt;/p&gt;
    
    &lt;p&gt;
      See &amp;#8216;config.log&amp;#8217; for more details
    &lt;/p&gt;
  &lt;/blockquote&gt;
  
  &lt;p&gt;
    不过很可惜，我在该目录下并没找到 config.log 文件。照错误的字面意思，大概是说通过 $PATH 没能找到可用的 C compiler。
  &lt;/p&gt;
  
  &lt;p&gt;
    看了些资料，说要安装下 &lt;a href=&#34;http://software.opensuse.org/package/gcc&#34;&gt;GCC&lt;/a&gt;。
  &lt;/p&gt;
  
  &lt;p&gt;
    安装完 GCC 后再跑一趟 &lt;code&gt;./configure&lt;/code&gt;，这回正常，之后 &lt;code&gt;make&lt;/code&gt;。
  &lt;/p&gt;
  
  &lt;p&gt;
    &lt;code&gt;find&lt;/code&gt; 一句的意思是，在当前目录，查找名称为 libfreetype.so.6.10.1 的文件，然后将它们移动到 /usr/lib/freetype-infinality/ 目录。&lt;code&gt;{}&lt;/code&gt; 类似占位符，&lt;a href=&#34;http://en.wikipedia.org/wiki/Find#Search_files_by_name_and_size&#34;&gt;find&lt;/a&gt; 命令会将找到的文件代入其中，&lt;code&gt;;&lt;/code&gt; 指示命令结束，之所以加转义符号 \ 是防止 Bash 把它理解成命令分隔符。
  &lt;/p&gt;
  
  &lt;p&gt;
    在完成以上操作后，我们可以切换到 /usr/lib/freetype-infinality 目录查看，现在有一个 libfreetype.so.6.10.1 文件 &amp;#8211; 是的，以上所有的操作是仅为了这个文件的。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_fontconfig-infinality&#34;&gt;下载 fontconfig-infinality&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_fontconfig-infinality&#34; href=&#34;#_fontconfig-infinality&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    仍是从 &lt;a href=&#34;http://www.infinality.net/blog/infinality-freetype-patches/&#34;&gt;infinality 网站&lt;/a&gt; 下载 fontconfig-infinality-1-20130104_1.tar.bz2，这回是解压到 /etc/fonts/ 目录下：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ sudo tar jfxv fontconfig-infinality-1-20130104_1.tar.bz2 -C /etc/fonts/
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    /etc/fonts/ 目录下共多出三个文件夹：
  &lt;/p&gt;
  
  &lt;ol&gt;
    &lt;li&gt;
      conf.avail
    &lt;/li&gt;
    &lt;li&gt;
      conf.d
    &lt;/li&gt;
    &lt;li&gt;
      infinality
    &lt;/li&gt;
  &lt;/ol&gt;
  
  &lt;p&gt;
    根据 /etc/fonts/infinality/README 文件说明，需要确保 /etc/fonts/conf.d 目录下的 52-infinality.conf 有软链接(symlink)指向 /etc/fonts/infinality/ 下的 infinality.conf：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cd /etc/fonts/conf.d/
$ sudo ln -sf ../infinality/infinality.conf 52-infinality.conf
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    infinality 的配置说明提到 /home/用户名 目录下的 .fonts.conf 文件，不过我的系统上又没有。于是我就创建一个：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cd /home/sam/
$ su #以 root 身份
$ vim .fonts.conf
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    在 .fonts.conf 文件中添加如下内容：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&#39;1.0&#39;?&amp;gt;
&amp;lt;!DOCTYPE fontconfig SYSTEM &#39;fonts.dtd&#39;&amp;gt;
&amp;lt;fontconfig&amp;gt;
&amp;lt;/fontconfig&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    保存后执行 &lt;code&gt;chattr +i .fonts.conf&lt;/code&gt; 命令，使得 .fonts.conf 不受更改或破坏。
  &lt;/p&gt;
  
  &lt;p&gt;
    然后添加以下内容到 /etc/X11/Xresources 及 ~/.Xresources(不存在的话创建一个) 文件里：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;Xft.autohint: 0
Xft.lcdfilter:  lcddefault
Xft.hintstyle:  hintfull
Xft.hinting: 1
Xft.antialias: 1
Xft.dpi: 96
Xft.rgba: rgb
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    &lt;small&gt;注：infinality 上提到 /etc/profile.d/infinality-settings.sh 文件可以自动配置 /etc/X11/Xresources 及 ~/.Xresources 文件，但我的情况，/etc/ 目录下是没有 profile.d 文件夹的。&lt;/small&gt;
  &lt;/p&gt;
  
  &lt;p&gt;
    接着重启系统。
  &lt;/p&gt;
  
  &lt;p&gt;
    如果需要修改字体渲染的配置文件，可以进入 /etc/fonts/infinality 目录：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ ./infctl.sh setstyle
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    运行后会提示几个可用的字体渲染配置方法，选择数字然后按确定即可。
  &lt;/p&gt;
  
  &lt;p&gt;
    至此，openSUSE 上的配置 infinality 算是完成。
  &lt;/p&gt;
  
  &lt;p&gt;
    至于效果，上图看看：
  &lt;/p&gt;
  
  &lt;p&gt;
    &lt;a href=&#34;http://www.zfanw.com/blog/wp-content/uploads/2013/11/opensuse-fonts-infinality.png&#34;&gt;&lt;img src=&#34;http://www.zfanw.com/blog/wp-content/uploads/2013/11/opensuse-fonts-infinality.png&#34; alt=&#34;opensuse 字体美化 渲染 infinality&#34; width=&#34;448&#34; height=&#34;292&#34; class=&#34;alignnone size-full wp-image-11080&#34; srcset=&#34;https://www.zfanw.com/blog/wp-content/uploads/2013/11/opensuse-fonts-infinality.png 448w, https://www.zfanw.com/blog/wp-content/uploads/2013/11/opensuse-fonts-infinality-300x195.png 300w&#34; sizes=&#34;(max-width: 448px) 100vw, 448px&#34; /&gt;&lt;/a&gt;
  &lt;/p&gt;
  
  &lt;p&gt;
    &lt;em&gt;另外，在我的系统里，Firefox在某些页面里，中文渲染的情况非常糟糕，有发虚的现象。后来安装了&lt;a href=&#34;http://wenq.org/wqy2/index.cgi?MicroHei&#34;&gt;文泉驿微米黑&lt;/a&gt;，才算正常。&lt;/em&gt;
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;i&#34;&gt;问题汇&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;heyi&#34; href=&#34;#i&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;ol&gt;
    &lt;li&gt;
      在我从命令窗口开启 Kaffeine 时，错误提示：
    &lt;/li&gt;
  &lt;/ol&gt;
  
  &lt;blockquote&gt;
    &lt;p&gt;
      Fontconfig warning: &amp;#8220;/etc/fonts/conf.d/56-user.conf&amp;#8221;, line 14: reading configurations from ~/.fonts.conf is deprecated. please move it to /home/sam/config/fontconfig/fonts.conf manually
    &lt;/p&gt;
  &lt;/blockquote&gt;
  
  &lt;p&gt;
    查看 /etc/fonts/conf.d/56-user.conf 文件，是一个指向 /usr/share/fontconf/conf.avail/50-user.conf 的软链接，里面的内容表示以上错误提示在将来会被移除。
  &lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Ubuntu 字体设置与 infinality</title>
      <link>https://www.zfanw.com/blog/ubuntu-font-render-with-infinality.html</link>
      <pubDate>Thu, 11 Oct 2012 05:36:31 +0000</pubDate>
      
      <guid>https://www.zfanw.com/blog/ubuntu-font-render-with-infinality.html</guid>
      <description>&lt;div id=&#34;toc_container&#34; class=&#34;ml-l u-floatRight pure-u-1-1 pure-u-sm-2-5 toc_white no_bullets&#34;&gt;
  &lt;nav id=&#34;myaffix&#34;&gt;
  
  &lt;p class=&#34;toc-title&#34;&gt;
    目录
  &lt;/p&gt;
  
  &lt;ul class=&#34;toc-list nav&#34; role=&#34;menu&#34;&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_fontconfig-infinality&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;1&lt;/span&gt; 安装 fontconfig-infinality 配置文件&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_freetype&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;2&lt;/span&gt; 给 freetype 源文件打补丁&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#i&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;3&lt;/span&gt; 其他设置内容&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#i-2&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;4&lt;/span&gt; 效果图&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#i-3&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;5&lt;/span&gt; 鸣谢&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ul&gt;&lt;/nav&gt;
&lt;/div&gt;

&lt;div class=&#34;&#34;&gt;
  &lt;p&gt;
    &lt;strong&gt;说明 2013.11.28&lt;/strong&gt;：本文写于2012年，内容与最新的 infinality 可能不一样，如有出入，请以官网说明为准。
  &lt;/p&gt;
  
  &lt;p&gt;
    我眼神不大好。见着别人说操作系统的字体可以渲染得怎样清晰和好看，但身边没有样例，就只好发挥自己的想象力。可惜实在想不出来，就找相关图片看了下，确实要比 Ubuntu 默认下的清晰、好看。
  &lt;/p&gt;
  
  &lt;p&gt;
    于是想尝试一下，就找来 infinality &amp;#8211; 这是因为在推上见&lt;a href=&#34;https://twitter.com/doublechou&#34;&gt;玛丽苏&lt;/a&gt;提过。结果先是不小心把 /etc/fonts/conf.d 文件夹给删了，当时还没想着处理，只一味担心重启系统后会出问题，结果发现，Ubuntu 竟然还能启动，还能打出中文，只是字体变了样子，与原来见的不一样，如下：
  &lt;/p&gt;
  
  &lt;p&gt;
    &lt;a href=&#34;http://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-09-233813.png&#34;&gt;&lt;img src=&#34;http://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-09-233813.png&#34; alt=&#34;删除 /etc/fonts/conf.d 后的字体&#34; title=&#34;Screenshot from 2012-10-09 23:38:13&#34; width=&#34;617&#34;  class=&#34;alignnone size-full wp-image-6154&#34; srcset=&#34;https://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-09-233813.png 617w, https://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-09-233813-300x70.png 300w&#34; sizes=&#34;(max-width: 617px) 100vw, 617px&#34; /&gt;&lt;/a&gt;
  &lt;/p&gt;
  
  &lt;p&gt;
    接着找了些资料，心里约摸觉得把 fontconfig-config 包重装一下就好：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ sudo apt-get --reinstall install fontconfig-config
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    切换到 etc/fonts/ 目录下，果然出来 conf.d 文件夹，重启系统，字体如下图：
  &lt;/p&gt;
  
  &lt;p&gt;
    &lt;a href=&#34;http://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-09-234606.png&#34;&gt;&lt;img src=&#34;http://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-09-234606.png&#34; alt=&#34;ubuntu字体设置&#34; title=&#34;Screenshot from 2012-10-09 23:46:06&#34; width=&#34;542&#34;  class=&#34;alignnone size-full wp-image-6155&#34; srcset=&#34;https://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-09-234606.png 542w, https://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-09-234606-300x153.png 300w&#34; sizes=&#34;(max-width: 542px) 100vw, 542px&#34; /&gt;&lt;/a&gt;
  &lt;/p&gt;
  
  &lt;p&gt;
    你可能要问：有区别吗？抱歉，这真是难到我了。
  &lt;/p&gt;
  
  &lt;p&gt;
    在我来看，这两张 GVIM 截图并没什么区别，大概是 GVIM 渲染方法不同，又或者我选择的字型的问题。不过在网页里，前后的区别倒一眼就能看出。不过不曾截图。
  &lt;/p&gt;
  
  &lt;p&gt;
    以下进入正题，&lt;strong&gt;Ubuntu&lt;/strong&gt; 下如何使用 &lt;strong&gt;infinality&lt;/strong&gt; 美化字体。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_fontconfig-infinality&#34;&gt;安装 fontconfig-infinality 配置文件&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_fontconfig-infinality&#34; href=&#34;#_fontconfig-infinality&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    首先，到 infinality 网站下载两个压缩包：
  &lt;/p&gt;
  
  &lt;ol&gt;
    &lt;li&gt;
      &lt;a href=&#34;http://www.infinality.net/fedora/linux/zips/freetype-infinality-2.4.10-20120616_01-x86_64.tar.bz2&#34;&gt;freetype-infinality-2.4.10-20120616_01-x86_64.tar.bz2&lt;/a&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;a href=&#34;http://www.infinality.net/fedora/linux/zips/fontconfig-infinality-1-20120615_1.tar.bz2&#34;&gt;fontconfig-infinality-1-20120615_1.tar.bz2&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
  
  &lt;p&gt;
    譬如都下载到 ~/Downloads 目录下，将 fontconfig-infinality 压缩包解压到 /etc/fonts/ 目录下：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cd ~/Downloads
$ tar -jfxv fontconfig-infinality-1-20120615_1.tar.bz2 -C /etc/fonts/
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    这样，/etc/fonts/ 目录下会出现一个子目录 infinality。
  &lt;/p&gt;
  
  &lt;p&gt;
    根据 infinality 目录下 README 的说明，需要为 /etc/fonts/conf.d/ 下的 52-infinality-conf 创建一个软链接(symlink)指向 /etc/fonts/infinality/ 下的 infinality.conf：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cd /etc/fonts/conf.d/
$ sudo ln -sf ../infinality/infinality.conf 52-infinality-conf
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    接着是调整 /etc/fonts/infinality/infinality.conf 文件配置，这是一个 XML 文件，可以手动修改，也可以通过运行 infinality 目录下的 infctl.sh 来设置：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cd /etc/fonts/infinality
$ sudo ./infctl.sh setstyle
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    这时会弹出 8 个预设值供你选择: 1) debug 2) infinality 3) linux 4) osx 5) osx2 6) win7 7) win98 8) winxp
  &lt;/p&gt;
  
  &lt;p&gt;
    比如我选择 2，然后按 Enter 确认，会出现一个结果信息：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;conf.d -&amp;gt; styles.conf.avail/infinality
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    这是修改了一个软链接指向。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_freetype&#34;&gt;给 freetype 源文件打补丁&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_freetype&#34; href=&#34;#_freetype&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    从 &lt;a href=&#34;http://download.savannah.gnu.org/releases/freetype/&#34;&gt;freetype 网站&lt;/a&gt; 下载 freetype 2.4.10 最新版，假设压缩包名称为 freetype-2.4.10.tar.gz，下载到 ~/Downloads 目录下。将其解压到 ~ 目录下：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cd 
$ tar -xvzf ~/Downloads/freetype-2.4.10.tar.gz -C .
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    解压出来的新目录名为 freetype-2.4.10。
  &lt;/p&gt;
  
  &lt;p&gt;
    接着解压 freetype-infinality-2.4.10-20120616_01-x86_64.tar.bz2 压缩包到 ~/bin/ 目录下，当然，要解压到其他地方也无所谓，如果目录不存在，请先建立一个：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cd ~
$ mkdir bin
$ cd bin
$ tar -xvjf ~/Downloads/freetype-infinality-2.4.10-20120616_01-x86_64.tar.bz2 -C .
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    现在文件都已经备齐，接下来就是开始打补丁：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cd ~/freetype-2.4.10
$ patch -p1 &amp;lt; ~/bin/freetype-add-subpixel-hinting-infinality-20120616-01.patch 
$ patch -p1 &amp;lt; ~/bin/freetype-enable-subpixel-hinting-infinality-20120615-01.patch 
$ patch -p1 &amp;lt; ~/bin/freetype-entire-infinality-patchset-20120615-01.patch 
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    这样，就给 freetype 源文件打好 finality 的补丁。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;i&#34;&gt;其他设置内容&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;heyi&#34; href=&#34;#i&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    接下来，还要进行一些设置，仍是在 freetype-2.4.10 目录下操作：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ ./configure
$ make
$ sudo mkdir /usr/lib/freetype-infinality/        # 如果跑 64 位系统就把 lib 改成 lib64
$ sudo find . -name libfreetype.so.6.9.0 -exec mv {} /usr/lib/freetype-infinality/ \;
$ cd /usr/lib/freetype-infinality
$ sudo ln -s libfreetype.so.6.9.0 libfreetype.so.6
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    在 ~/bin/ 目录下有两个文件，根据建议需要拷贝到 /etc/profile.d/ 目录下：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cd ~/bin
$ sudo cp infinality-settings.sh freetype-infinality.sh /etc/profile.d/
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    /etc/profile.d/infinality-settings.sh 这个文件里可以做很多设置，具体根据个人需要进行修改。
  &lt;/p&gt;
  
  &lt;p&gt;
    接着，登出系统再登入，最好是重启系统。
  &lt;/p&gt;
  
  &lt;p&gt;
    不过根据我的经历，将这两个文件拷入 /etc/profilde.d/ 目录后重启系统，差一点都登录不进来，输入密码后迅速地闪了一下屏幕，就又回到登录界面 。后来切换到 tty 下移除这两个文件，这才算进来了，目测没这两个文件 infinality 也起作用，另外，如果只拷贝 infinality-settings.sh 到 /etc/profile.d/ 目录下是没问题的。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;i-2&#34;&gt;效果图&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;heyi-2&#34; href=&#34;#i-2&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    &lt;a href=&#34;http://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-10-024510.png&#34;&gt;&lt;img src=&#34;http://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-10-024510.png&#34; alt=&#34;ubuntu 字体设置 infinality&#34; title=&#34;ubuntu 字体设置效果&#34; width=&#34;541&#34;  class=&#34;alignnone size-full wp-image-6182&#34; srcset=&#34;https://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-10-024510.png 541w, https://www.zfanw.com/blog/wp-content/uploads/2012/10/Screenshot-from-2012-10-10-024510-300x87.png 300w&#34; sizes=&#34;(max-width: 541px) 100vw, 541px&#34; /&gt;&lt;/a&gt;
  &lt;/p&gt;
  
  &lt;p&gt;
    在其他不曾设置过的屏幕上，将上图与图片上下的文字显示效果对比一下就知道，这字体设置是否成功。最明显的，是字的锯齿不那么了然，每个字像是一笔一划写出来的，而不是点点点组成。这也就是 infinality 的目的之一：&lt;q&gt;freely provide the nicest font rendering of any operating system.&lt;/q&gt;
  &lt;/p&gt;
  
  &lt;p&gt;
    这样，我们就完成 Ubuntu 系统下的字体设置，即字体渲染的方法的调整，接下来可以针对不同程序进行字型(font)的选择，这就根据个人喜好，没什么规则可言。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;i-3&#34;&gt;鸣谢&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;heyi-3&#34; href=&#34;#i-3&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;ol&gt;
    &lt;li&gt;
      &lt;a href=&#34;http://www.infinality.net/forum/viewtopic.php?f=2&amp;t=77#p794&#34;&gt;infinality.net 上的安装说明&lt;/a&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;a href=&#34;http://forums.opensuse.org/ae-ae-chinese/aes-aeoe-e-e-ae-zae-aeoe/c-ae-zae-aeoe/470464-opensuse-c-aeoe-oec-zcs-ae-ae-az-e-c-i-oec-ae-mactype.html&#34;&gt;openSUSE 论坛的相关内容&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>