<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Gruntjs on 陈三</title>
    <link>https://www.zfanw.com/blog/tags/gruntjs/</link>
    <description>Recent content in Gruntjs on 陈三</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Sat, 20 Jul 2013 09:32:50 +0000</lastBuildDate>
    <atom:link href="https://www.zfanw.com/blog/tags/gruntjs/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Gruntjs 批量无损压缩图片大小</title>
      <link>https://www.zfanw.com/blog/gruntjs-optimize-image-size-loseless.html</link>
      <pubDate>Sat, 20 Jul 2013 09:32:50 +0000</pubDate>
      
      <guid>https://www.zfanw.com/blog/gruntjs-optimize-image-size-loseless.html</guid>
      <description>&lt;div id=&#34;toc_container&#34; class=&#34;ml-l u-floatRight pure-u-1-1 pure-u-sm-2-5 toc_white no_bullets&#34;&gt;
  &lt;nav id=&#34;myaffix&#34;&gt;
  
  &lt;p class=&#34;toc-title&#34;&gt;
    目录
  &lt;/p&gt;
  
  &lt;ul class=&#34;toc-list nav&#34; role=&#34;menu&#34;&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_imagemin&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;1&lt;/span&gt; 安装 imagemin 插件&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#i&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;2&lt;/span&gt; 配置压缩图片任务&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ul&gt;&lt;/nav&gt;
&lt;/div&gt;

&lt;div class=&#34;&#34;&gt;
  &lt;p&gt;
    Photoshop 切出的图片，含有多余信息，它们对网页前端并没有用处，反而增加图片大小，所以 Google Web Fundamentals 里建议我们&lt;a href=&#34;https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/image-optimization#tools-and-parameter-tuning&#34;&gt;使用工具&lt;/a&gt;压缩图片大小，减少用户下载的文件大小。
  &lt;/p&gt;
  
  &lt;p&gt;
    如果你用 Grunt.js，我们就可以借助它的插件 &lt;a href=&#34;https://github.com/gruntjs/grunt-contrib-imagemin&#34;&gt;Grunt-contrib-imagemin&lt;/a&gt; 来批量、无损压缩图片大小。
  &lt;/p&gt;
  
  &lt;p&gt;
    如果你对 Grunt.js 不了解，可以看我上一篇&lt;a href=&#34;http://www.zfanw.com/blog/gruntjs.html&#34;&gt;简单介绍&lt;/a&gt;。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_imagemin&#34;&gt;安装 imagemin 插件&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_imagemin&#34; href=&#34;#_imagemin&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    切换到项目文件夹，
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;cd projectName
npm install grunt-contrib-imagemin --save-dev
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;i&#34;&gt;配置压缩图片任务&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;heyi&#34; href=&#34;#i&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    接下来配置 Gruntfile.js 文件，定义优化图片大小的任务：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;/*global module:false*/
module.exports = function (grunt) {
  &#39;use strict&#39;
  grunt.initConfig({
    imagemin: {
      /* 压缩图片大小 */
      dist: {
        options: {
          optimizationLevel: 3 // 定义 PNG 图片优化水平
        },
        files: [{
          expand: true,
          cwd: &#39;img/&#39;,
          src: [&#39;**/*.{png,jpg,jpeg}&#39;], // 优化 img 目录下所有 png/jpg/jpeg 图片
          dest: &#39;img/&#39; // 优化后的图片保存位置，覆盖旧图片，并且不作提示
        }]
      }
    },
  })
  grunt.loadNpmTasks(&#39;grunt-contrib-imagemin&#39;)
  grunt.registerTask(&#39;img&#39;, [&#39;imagemin&#39;])
}

&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    运行 &lt;code&gt;grunt imagemin&lt;/code&gt; 命令：
  &lt;/p&gt;
  
  &lt;p&gt;
    &lt;a href=&#34;http://www.zfanw.com/blog/wp-content/uploads/2013/07/Screenshot-from-2013-07-20-135942.png&#34;&gt;&lt;img src=&#34;http://www.zfanw.com/blog/wp-content/uploads/2013/07/Screenshot-from-2013-07-20-135942.png&#34; alt=&#34;Gruntjs 批量压缩图片大小&#34; width=&#34;548&#34; height=&#34;187&#34; class=&#34;alignnone size-full wp-image-9672&#34; srcset=&#34;https://www.zfanw.com/blog/wp-content/uploads/2013/07/Screenshot-from-2013-07-20-135942.png 548w, https://www.zfanw.com/blog/wp-content/uploads/2013/07/Screenshot-from-2013-07-20-135942-300x102.png 300w&#34; sizes=&#34;(max-width: 548px) 100vw, 548px&#34; /&gt;&lt;/a&gt;
  &lt;/p&gt;
  
  &lt;p&gt;
    上图可以看到，图片压缩的比率非常可观。之后再使用 &lt;a href=&#34;https://developers.google.com/speed/pagespeed/insights&#34;&gt;Google PageSpeed 工具&lt;/a&gt;检测，就不再提醒我们压缩图片。
  &lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>