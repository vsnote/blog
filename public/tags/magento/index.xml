<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Magento on 陈三</title>
    <link>https://www.zfanw.com/blog/tags/magento/</link>
    <description>Recent content in Magento on 陈三</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Tue, 26 Aug 2014 14:34:22 +0000</lastBuildDate>
    <atom:link href="https://www.zfanw.com/blog/tags/magento/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Magento复制站点</title>
      <link>https://www.zfanw.com/blog/magento-clone-site.html</link>
      <pubDate>Tue, 26 Aug 2014 14:34:22 +0000</pubDate>
      
      <guid>https://www.zfanw.com/blog/magento-clone-site.html</guid>
      <description>&lt;p&gt;Magento 的模板配置十分麻烦，所以有人贪图省事，就直接复制已有的站点，方法如底部链接所示&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:13420-1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:13420-1&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;

&lt;p&gt;但不幸的是，我碰上一个问题：新域名会被强制 302 跳转到老的域名。我十分仔细地确认了数据库里的 &lt;code&gt;core_config_data&lt;/code&gt; 表里的两个 URL 配置：&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;web/unsecure/base_url&lt;/li&gt;
&lt;li&gt;web/secure/base_url&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;均已指向新域名，没有问题。&lt;/p&gt;

&lt;p&gt;新域名的管理后台网址倒是可以访问到，但查看源代码的话，js、css 等的链接全是旧域名的。&lt;/p&gt;

&lt;p&gt;注意，我对 &lt;code&gt;core_config_data&lt;/code&gt; 表做的两个修改是通过 phpMyAdmin 界面完成的。&lt;/p&gt;

&lt;p&gt;问题就在这里。&lt;/p&gt;

&lt;p&gt;通过 phpMyAdmin 左侧的 &lt;code&gt;filter&lt;/code&gt; 功能过滤出来的 &lt;code&gt;core_config_data&lt;/code&gt; 表格其实有两个，而我改了不是我真正应该改的表格。&lt;/p&gt;

&lt;p&gt;最后还是 SQL 语句靠谱点：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SELECT * FROM `database_name`.`core_config_data` 
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:13420-1&#34;&gt;&lt;a href=&#34;http://www.itworld.com/it-management/360898/how-copy-magento-installation-new-domain&#34;&gt;How to copy a Magento installation to a new domain | ITworld&lt;/a&gt;
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:13420-1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Magento 移除 URL 中的 index.php</title>
      <link>https://www.zfanw.com/blog/magento-remove-index-php-in-url.html</link>
      <pubDate>Tue, 16 Jul 2013 14:08:20 +0000</pubDate>
      
      <guid>https://www.zfanw.com/blog/magento-remove-index-php-in-url.html</guid>
      <description>&lt;p&gt;默认情况下，Magento 搭建的网站，分类的 URL 范式是：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;http://www.example.com/index.php/category.html
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;URL 中的 &lt;code&gt;index.php&lt;/code&gt; 会导致网址过长，移除它也没什么坏处，所以最好还是移除掉。&lt;/p&gt;

&lt;p&gt;方法如下：&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;进入管理后台&lt;/li&gt;
&lt;li&gt;打开 System -&amp;gt; Configuration 菜单项&lt;/li&gt;
&lt;li&gt;左侧菜单树中找到 Web 选项卡，右侧子菜单中有 &lt;code&gt;Search Engine Optimization&lt;/code&gt;，把 &lt;code&gt;Use Web Server Rewrites&lt;/code&gt; 值从 no 改成 yes，保存。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;注：本方法在 Magento 1.7.0.2 下测试有效。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Magento 幻灯片</title>
      <link>https://www.zfanw.com/blog/magento-slideshow.html</link>
      <pubDate>Wed, 01 Aug 2012 08:15:02 +0000</pubDate>
      
      <guid>https://www.zfanw.com/blog/magento-slideshow.html</guid>
      <description>&lt;div id=&#34;toc_container&#34; class=&#34;ml-l u-floatRight pure-u-1-1 pure-u-sm-2-5 toc_white no_bullets&#34;&gt;
  &lt;nav id=&#34;myaffix&#34;&gt;
  
  &lt;p class=&#34;toc-title&#34;&gt;
    目录
  &lt;/p&gt;
  
  &lt;ul class=&#34;toc-list nav&#34; role=&#34;menu&#34;&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_jQuery&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;1&lt;/span&gt; 添加 jQuery&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_Craftyslide&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;2&lt;/span&gt; 引用 Craftyslide 相关文件&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#i&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;3&lt;/span&gt; 添加幻灯片内容&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#i-2&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;4&lt;/span&gt; 执行幻灯片效果&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ul&gt;&lt;/nav&gt;
&lt;/div&gt;

&lt;div class=&#34;&#34;&gt;
  &lt;p&gt;
    如果要在 Magento 主页上添加幻灯片（slideshow）效果，技术上也是比较简单的。这一节所用的材料如下：
  &lt;/p&gt;
  
  &lt;ol&gt;
    &lt;li&gt;
      &lt;a href=&#34;http://docs.jquery.com/Downloading_jQuery&#34;&gt;jQuery&lt;/a&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;a href=&#34;http://projects.craftedpixelz.co.uk/craftyslide/&#34;&gt;Craftyslide&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
  
  &lt;p&gt;
    注：jQuery 有许多做幻灯片的插件，Craftyslide 只是一例。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_jQuery&#34;&gt;添加 jQuery&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_jQuery&#34; href=&#34;#_jQuery&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    首先，需要给 Magento 的主页添加 jQuery 支持，按照&lt;a href=&#34;http://www.zfanw.com/blog/magento-add-jquery-support.html&#34;&gt;给 Magento 添加 jQuery&lt;/a&gt; 一篇中的说明，打开 CMS -&gt; Pages -&gt; Home page，将下段代码添加到 Design 标签下的 Layout Update XML 里：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;&amp;lt;reference name=&#34;head&#34;&amp;gt;
   &amp;lt;action method=&#34;addItem&#34;&amp;gt;
       &amp;lt;type&amp;gt;skin_js&amp;lt;/type&amp;gt;
       &amp;lt;name&amp;gt;js/jquery.js&amp;lt;/name&amp;gt;
   &amp;lt;/action&amp;gt;
&amp;lt;/reference&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_Craftyslide&#34;&gt;引用 Craftyslide 相关文件&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_Craftyslide&#34; href=&#34;#_Craftyslide&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    下载 Craftyslide，然后将相应文件解压到相应位置，然后在上面一个步骤代码中加入如下内容：
  &lt;/p&gt;
  
  &lt;p&gt;
    &lt;action method=&#34;addItem&#34;&gt; &lt;type&gt;skin_js&lt;/type&gt; &lt;name&gt;js/craftyslide/js/craftyslide.js&lt;/name&gt; &lt;/action&gt; &lt;action method=&#34;addItem&#34;&gt; &lt;type&gt;skin_css&lt;/type&gt; &lt;name&gt;css/craftyslide.css&lt;/name&gt; &lt;/action&gt;
  &lt;/p&gt;
  
  &lt;p&gt;
    这样我们在主页里调用 craftyslide 的 js 文件，并应用它的样式。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;i&#34;&gt;添加幻灯片内容&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;heyi&#34; href=&#34;#i&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    然后该是添加幻灯片内容。打开 Home page 页，在 Content 中添加如下：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;&amp;lt;div id=&#34;slideshow&#34;&amp;gt;
&amp;lt;ul&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;img src=&#34;{{skin url=&#39;images/slider/nemo.jpg&#39;}}&#34; alt=&#34;&#34; /&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;a href=&#34;http://www.zfanw.com/blog&#34;&amp;gt;&amp;lt;img title=&#34;#htmlcaption&#34; src=&#34;{{skin url=&#39;images/slider/toystory.jpg&#39;}}&#34; alt=&#34;&#34; /&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;img title=&#34;This is an example of a caption&#34; src=&#34;{{skin url=images/slider/up.jpg}}&#34; alt=&#34;&#34; /&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;li&amp;gt;&amp;lt;img src=&#34;{{skin url=&#39;images/slider/walle.jpg}}&#34; alt=&#34;&#34; /&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;
&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;i-2&#34;&gt;执行幻灯片效果&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;heyi-2&#34; href=&#34;#i-2&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    根据插件的使用说明，可以新建一个 slideshow.js 文件，用于执行幻灯片效果，内容如下：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;var $j=jQuery.noConflict();
$j(window).load(function() {
    $j(&#34;#slideshow&#34;).craftyslide();
});
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    然后在1步骤的 reference 里添加如下：
  &lt;/p&gt;
  
  &lt;p&gt;
    &lt;action method=&#34;addItem&#34;&gt; &lt;type&gt;skin_js&lt;/type&gt; &lt;name&gt;js/craftyslide/slideshow.js&lt;/name&gt; &lt;/action&gt;
  &lt;/p&gt;
  
  &lt;p&gt;
    这样就可以在主页调用该执行代码。
  &lt;/p&gt;
  
  &lt;p&gt;
    保存后再刷新网页，已经有下图中的幻灯片效果：
  &lt;/p&gt;
  
  &lt;p&gt;
    &lt;a href=&#34;http://www.zfanw.com/blog/wp-content/uploads/2012/08/slideshow.png&#34;&gt;&lt;img src=&#34;http://www.zfanw.com/blog/wp-content/uploads/2012/08/slideshow-300x223.png&#34; alt=&#34;Magento 幻灯片&#34; title=&#34;slideshow&#34; width=&#34;300&#34; class=&#34;alignnone size-medium wp-image-4618&#34; srcset=&#34;https://www.zfanw.com/blog/wp-content/uploads/2012/08/slideshow-300x223.png 300w, https://www.zfanw.com/blog/wp-content/uploads/2012/08/slideshow.png 686w&#34; sizes=&#34;(max-width: 300px) 100vw, 300px&#34; /&gt;&lt;/a&gt;
  &lt;/p&gt;
  
  &lt;p&gt;
    当然，上面的方法是直接把幻灯片内容代码写入 Magento 主页内容中，也可以创建一个 Static Blocks，然后再从主页内容里以如下形式引入静态块：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;{{block type=&#34;cms/block&#34; block_id=&#34;slider-show&#34;}}
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    这个就看个人喜好了。
  &lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Magento 添加 jQuery 支持</title>
      <link>https://www.zfanw.com/blog/magento-add-jquery-support.html</link>
      <pubDate>Fri, 27 Jul 2012 14:59:36 +0000</pubDate>
      
      <guid>https://www.zfanw.com/blog/magento-add-jquery-support.html</guid>
      <description>&lt;div id=&#34;toc_container&#34; class=&#34;ml-l u-floatRight pure-u-1-1 pure-u-sm-2-5 toc_white no_bullets&#34;&gt;
  &lt;nav id=&#34;myaffix&#34;&gt;
  
  &lt;p class=&#34;toc-title&#34;&gt;
    目录
  &lt;/p&gt;
  
  &lt;ul class=&#34;toc-list nav&#34; role=&#34;menu&#34;&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#addJs&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;1&lt;/span&gt; addJs 方法&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#addItem&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;2&lt;/span&gt; addItem 方法&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_headphtml&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;3&lt;/span&gt; 硬编码 head.phtml&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ul&gt;&lt;/nav&gt;
&lt;/div&gt;

&lt;div class=&#34;&#34;&gt;
  &lt;p&gt;
    Magento 添加 jQuery 有许多办法，可以硬编码到 head.phtml，但也有些灵活用法。以下说几个灵活的应用法。
  &lt;/p&gt;
  
  &lt;p&gt;
    假设 magento 安装在 本地 htdocs/chenxsan 目录下，新的模板文件夹名称为 lan，则先在 lan/layout/ 文件夹下新建一个 local.xml 文件：
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;addJs&#34;&gt;addJs 方法&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;heyaddJs&#34; href=&#34;#addJs&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    首先将 jquery.js 添加到 chenxsan/js/ 目录下，然后在 local.xml 中添加如下语句：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;&amp;lt;reference name=&#34;head&#34;&amp;gt;
    &amp;lt;action method=&#34;addJs&#34;&amp;gt;&amp;lt;script&amp;gt;jquery.js&amp;lt;/script&amp;gt;&amp;lt;/action&amp;gt;
&amp;lt;/reference&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    刷新网页，查看源代码，里面已经添加 jquery.js：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;&amp;lt;script type=&#34;text/javascript&#34; src=&#34;http://localhost/chenxsan/js/jquery.js&#34;&amp;gt;
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    这种用法觉见于多主题里都要调用 jQuery 的情况。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;addItem&#34;&gt;addItem 方法&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;heyaddItem&#34; href=&#34;#addItem&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    首先将 jquery.js 添加到 chenxsan/skin/frontend/default/lan/js/ 目录下，然后在 local.xml 文件添加以下语句：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;&amp;lt;reference name=&#34;head&#34;&amp;gt;
   &amp;lt;action method=&#34;addItem&#34;&amp;gt;
       &amp;lt;type&amp;gt;skin_js&amp;lt;/type&amp;gt;
       &amp;lt;name&amp;gt;js/jquery.js&amp;lt;/name&amp;gt;
   &amp;lt;/action&amp;gt;
&amp;lt;/reference&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    刷新网页，查看源代码：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;&amp;lt;script type=&#34;text/javascript&#34; src=&#34;http://localhost/chenxsan/skin/frontend/default/lan/js/jquery.js&#34;&amp;gt;
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    因为 Magento 本身引用 prototype js 库，也使用 $，这会造成与 jQuery 语句的冲突，为解决这冲突，在所写的 js 代码前需要引入 noConflict() ：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;jQuery.noConflict();
 jQuery(document).ready(function(){
    //code here
  });
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    如果嫌 jQuery 这样太长，则可以这样写：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;var $j = jQuery.noConflict();
    $j(document).ready(function(){
   //code here
});
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    这样，你如果要 extjs 的话，则可以放心使用 $ 了。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_headphtml&#34;&gt;硬编码 head.phtml&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_headphtml&#34; href=&#34;#_headphtml&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    最后再提个硬编码到 template/page/html/head.phtml 文件的办法。
  &lt;/p&gt;
  
  &lt;p&gt;
    直接在合适的位置加入下列语句：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;&amp;lt;script type=&#34;text/javascript&#34; src=&#34;http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js&#34;&amp;gt;
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    以上所说的办法是将 jQuery 添加到网站前端整站，如果要针对特定的 CMS 页面 引用 jQuery，则请到后台管理的 CMS -&gt; Pages -&gt; Design -&gt; Page Layout 下 “Layout Update XML” 里设置。又或要针对分类进行设置，也可以在 Catalog -&gt; Manage categories -&gt; Custom Design 下的 &amp;#8220;Custom Layout Update&amp;#8221; 下添加。
  &lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>