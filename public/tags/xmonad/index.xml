<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Xmonad on 陈三</title>
    <link>https://www.zfanw.com/blog/tags/xmonad/</link>
    <description>Recent content in Xmonad on 陈三</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Sat, 06 Dec 2014 03:23:11 +0000</lastBuildDate>
    <atom:link href="https://www.zfanw.com/blog/tags/xmonad/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>KDE 与 Xmonad</title>
      <link>https://www.zfanw.com/blog/kde-with-xmonad.html</link>
      <pubDate>Sat, 06 Dec 2014 03:23:11 +0000</pubDate>
      
      <guid>https://www.zfanw.com/blog/kde-with-xmonad.html</guid>
      <description>&lt;div id=&#34;toc_container&#34; class=&#34;ml-l u-floatRight pure-u-1-1 pure-u-sm-2-5 toc_white no_bullets&#34;&gt;
  &lt;nav id=&#34;myaffix&#34;&gt;
  
  &lt;p class=&#34;toc-title&#34;&gt;
    目录
  &lt;/p&gt;
  
  &lt;ul class=&#34;toc-list nav&#34; role=&#34;menu&#34;&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_Xmonad&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;1&lt;/span&gt; 安装 Xmonad&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_xmonadhs&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;2&lt;/span&gt; 配置 xmonad.hs&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#i&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;3&lt;/span&gt; 设置窗口管理器&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#i-2&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;4&lt;/span&gt; 附录&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ul&gt;&lt;/nav&gt;
&lt;/div&gt;

&lt;div class=&#34;&#34;&gt;
  &lt;p&gt;
    之前我写过一篇博客 &lt;a href=&#34;http://www.zfanw.com/blog/opensuse-xmonad.html&#34;&gt;openSUSE 下的 xmonad&lt;/a&gt;，讲的是完整的 xmonad 环境，这篇讲 &lt;strong&gt;KDE 下如何使用 xmonad&lt;/strong&gt;，好处是 KDE 的许多功能都可以使用，只是窗口管理器换成 xmonad。
  &lt;/p&gt;
  
  &lt;blockquote&gt;
    &lt;p&gt;
      系统环境：openSUSE 13.2
    &lt;/p&gt;
  &lt;/blockquote&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_Xmonad&#34;&gt;安装 Xmonad&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_Xmonad&#34; href=&#34;#_Xmonad&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    参照&lt;a href=&#34;http://www.zfanw.com/blog/opensuse-xmonad.html&#34;&gt;前一篇说明&lt;/a&gt;，使用 &lt;code&gt;cabal&lt;/code&gt; 安装 xmonad。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_xmonadhs&#34;&gt;配置 xmonad.hs&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_xmonadhs&#34; href=&#34;#_xmonadhs&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    打开 &lt;code&gt;~/.xmonad/xmonad.hs&lt;/code&gt; 文件，将内容改为如下&lt;fnref target=&#34;14705.1&#34; /&gt;：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;import System.IO

import XMonad
import XMonad.Config.Kde
import XMonad.Hooks.SetWMName
import XMonad.Util.WindowProperties (getProp32s)

main = do
  xmonad kde4Config {
    terminal = &#34;konsole&#34;
  , modMask = mod4Mask
  , startupHook = setWMName &#34;LG3D&#34;
  , manageHook = ((className =? &#34;krunner&#34;) &amp;gt;&amp;gt;= return . not --&amp;gt; manageHook kde4Config)
      &amp;lt;+&amp;gt; (kdeOverride --&amp;gt; doFloat)
}

kdeOverride :: Query Bool
kdeOverride = ask &amp;gt;&amp;gt;= \w -&amp;gt; liftX $ do
    override &amp;lt;- getAtom &#34;_KDE_NET_WM_WINDOW_TYPE_OVERRIDE&#34;
    wt &amp;lt;- getProp32s &#34;_NET_WM_WINDOW_TYPE&#34; w
    return $ maybe False (elem $ fromIntegral override) wt
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;i&#34;&gt;设置窗口管理器&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;heyi&#34; href=&#34;#i&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    先用 &lt;code&gt;which&lt;/code&gt; 命令查看 xmonad 路径：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;sam@linux-qo4p:~|master⚡⇒  which xmonad 
/home/sam/.cabal/bin/xmonad
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    在 &lt;em&gt;~/.kde4/env&lt;/em&gt; 目录（&lt;strong&gt;如果是 &lt;a href=&#34;https://www.kde.org/announcements/plasma5.0/&#34; title=&#34;plasma 5, kde 5&#34;&gt;Plasma5&lt;/a&gt; 的话则是在 ~/.config/plasma-workspace/env **）下创建 **set_window_manager.sh&lt;/strong&gt; 文件，添加如下内容：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;export KDEWM=/home/sam/.cabal/bin/xmonad
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    修改文件权限，允许文件执行：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ chmod 755 set_window_manager.sh
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    注销 KDE 会话，然后再登录进去，KDE 的窗口管理器已经从 kwin 换成 Xmonad 了&lt;fnref target=&#34;14705.2&#34; /&gt;，如下图：
  &lt;/p&gt;
  
  &lt;p&gt;
    [resp_image id=&amp;#8217;14769&amp;#8242; caption=&amp;#8221; ]
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;i-2&#34;&gt;附录&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;heyi-2&#34; href=&#34;#i-2&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;ol&gt;
    &lt;li&gt;
      &lt;a href=&#34;https://github.com/chenxsan/rc-files/blob/master/.xmonad/xmonad.hs&#34;&gt;存放在 Github 上的我的 xmonad.hs 配置文件&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
  
  &lt;footnotes&gt;
    &lt;fn name=&#34;14705.1&#34;&gt;
      &lt;p&gt;
        &lt;a href=&#34;https://code.google.com/p/xmonad/issues/attachmentText?id=430&amp;aid=-7752565881665183817&amp;name=xmonad.hs&amp;token=ABZ6GAfGlZ9LEhxXYjzpcH9ZO25qwQmc0w%3A1417834536394&#34;&gt;Google Code 上的一个 xmonad.hs 配置文件（英文）&lt;/a&gt;
      &lt;/p&gt;
    &lt;/fn&gt;
    
    &lt;fn name=&#34;14705.2&#34;&gt;
      &lt;p&gt;
        &lt;a href=&#34;https://www.haskell.org/haskellwiki/Xmonad/Using_xmonad_in_KDE&#34;&gt;HaskellWiki 教你如何在 KDE 下使用 Xmonad（英文）&lt;/a&gt;
      &lt;/p&gt;
    &lt;/fn&gt;
  &lt;/footnotes&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>openSUSE 安装使用 xmonad</title>
      <link>https://www.zfanw.com/blog/opensuse-xmonad.html</link>
      <pubDate>Mon, 03 Nov 2014 21:45:42 +0000</pubDate>
      
      <guid>https://www.zfanw.com/blog/opensuse-xmonad.html</guid>
      <description>&lt;div id=&#34;toc_container&#34; class=&#34;ml-l u-floatRight pure-u-1-1 pure-u-sm-2-5 toc_white no_bullets&#34;&gt;
  &lt;nav id=&#34;myaffix&#34;&gt;
  
  &lt;p class=&#34;toc-title&#34;&gt;
    目录
  &lt;/p&gt;
  
  &lt;ul class=&#34;toc-list nav&#34; role=&#34;menu&#34;&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#i&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;1&lt;/span&gt; 安装&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#i-2&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;2&lt;/span&gt; 启动与配置&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ul&gt;&lt;/nav&gt;
&lt;/div&gt;

&lt;div class=&#34;&#34;&gt;
  &lt;p&gt;
    在我用 Ubuntu 的时候，尝试过 &lt;a href=&#34;http://xmonad.org/&#34;&gt;xmonad&lt;/a&gt;，颇喜欢。但奇怪的是，openSUSE 软件库中没有它，需要自行安装。好在 Haskell 本身提供有包管理工具 &lt;a href=&#34;https://www.haskell.org/cabal/&#34;&gt;cabal&lt;/a&gt;，十分便利。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;i&#34;&gt;安装&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;heyi&#34; href=&#34;#i&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    首先安装 &lt;em&gt;cabal-install&lt;/em&gt; 工具：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ sudo zypper install cabal-install
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    安装完 &lt;em&gt;cabal&lt;/em&gt; 后，检查其安装情况：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cabal --version
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    通常会输出 &lt;em&gt;using version 1.16.0 of the Cabal library&lt;/em&gt; 这样的内容。
  &lt;/p&gt;
  
  &lt;p&gt;
    不过通常 openSUSE 库上的软件并非最新，可能需要升级 &lt;em&gt;cabal-install&lt;/em&gt;：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cabal install cabal-install
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    另外，我们还需要安装 GHC Haskell compiler，openSUSE 下安装方法：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ sudo zypper install ghc
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    紧接着更新 cabal 库：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cabal update
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    然后安装 xmonad&lt;fnref target=&#34;14144.1&#34; /&gt;：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cabal install http://code.haskell.org/xmonad/xmonad.tar.gz
$ cabal install http://code.haskell.org/XMonadContrib/xmc.tar.gz
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    安装完成后可以通过以下命令检查安装的情况：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ xmonad --version
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;i-2&#34;&gt;启动与配置&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;heyi-2&#34; href=&#34;#i-2&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p class=&#39;text-danger&#39;&gt;
    如果你打算继续使用 KDE 提供的各种功能，而非完全的 xmonad，请访问我的另一篇博客 &lt;a href=&#34;http://www.zfanw.com/blog/kde-with-xmonad.html&#34; title=&#34;KDE 与 Xmonad&#34;&gt;KDE 与 Xmonad&lt;/a&gt;，忽略以下内容。
  &lt;/p&gt;
  
  &lt;p&gt;
    接下来即是启动 xmonad。我原来的桌面环境是 KDE&lt;fnref target=&#34;14144.2&#34; /&gt;，需要做些配置。
  &lt;/p&gt;
  
  &lt;p&gt;
    首先，在主目录下创建一个 &lt;em&gt;.xsession&lt;/em&gt; 文件，并加入如下内容：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;xmonad
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    为了让登录时 xmonad 可选，在 &lt;em&gt;/usr/share/xsessions/&lt;/em&gt; 目录下添加 &lt;em&gt;xmonad.desktop&lt;/em&gt; 文件。
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ sudo vi /usr/share/xsessions/xmonad.desktop
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    然后文件中添加如下内容：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;   [Desktop Entry]
   Encoding=UTF-8
   Name=xmonad
   Comment=This session starts xmonad
   Exec=/home/sam/.cabal/bin/xmonad
   Type=Application
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    注意，xmonad 可执行文件路径是 &lt;em&gt;/home/sam/.cabal/bin/xmonad&lt;/em&gt;，需要将其加入 $PATH 环境变量中：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ cd ~
$ vi .bashrc
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    添加：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;export PATH=$PATH:~/.cabal/bin
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    登出 KDE，选择 xmond，再登录系统 &amp;#8211; 哈，一片空白。
  &lt;/p&gt;
  
  &lt;p&gt;
    别慌，这就是 xmonad，你可以按 &lt;kbd&gt;Alt + Shift + Enter&lt;/kbd&gt; 调出终端窗口，如果玩了一会儿感觉不佳，可以按 &lt;kbd&gt;Alt + Shift + Q&lt;/kbd&gt; 退出登陆，重新选择 KDE。
  &lt;/p&gt;
  
  &lt;footnotes&gt;
    &lt;fn name=&#34;14144.1&#34;&gt;
      &lt;p&gt;
        &lt;a href=&#34;http://xmonad.org/intro.html&#34;&gt;xmonad : building and installation&lt;/a&gt;
      &lt;/p&gt;
    &lt;/fn&gt;
    
    &lt;fn name=&#34;14144.2&#34;&gt;
      &lt;p&gt;
        &lt;a href=&#34;https://www.haskell.org/haskellwiki/Xmonad/Frequently_asked_questions#How_can_I_use_xmonad_with_a_display_manager.3F_.28xdm.2C_kdm.2C_gdm.29&#34;&gt;Xmonad/Frequently asked questions &amp;#8211; HaskellWiki&lt;/a&gt;
      &lt;/p&gt;
    &lt;/fn&gt;
  &lt;/footnotes&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>