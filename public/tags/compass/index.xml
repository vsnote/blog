<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Compass on 陈三</title>
    <link>https://www.zfanw.com/blog/tags/compass/</link>
    <description>Recent content in Compass on 陈三</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Fri, 04 Oct 2013 14:01:29 +0000</lastBuildDate>
    <atom:link href="https://www.zfanw.com/blog/tags/compass/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Compass 与 CSS 贴图定位</title>
      <link>https://www.zfanw.com/blog/compass-sprite.html</link>
      <pubDate>Fri, 04 Oct 2013 14:01:29 +0000</pubDate>
      
      <guid>https://www.zfanw.com/blog/compass-sprite.html</guid>
      <description>&lt;div id=&#34;toc_container&#34; class=&#34;ml-l u-floatRight pure-u-1-1 pure-u-sm-2-5 toc_white no_bullets&#34;&gt;
  &lt;nav id=&#34;myaffix&#34;&gt;
  
  &lt;p class=&#34;toc-title&#34;&gt;
    目录
  &lt;/p&gt;
  
  &lt;ul class=&#34;toc-list nav&#34; role=&#34;menu&#34;&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_Ruby&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;1&lt;/span&gt; 安装 Ruby&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_compass&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;2&lt;/span&gt; 安装 compass&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_compass-2&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;3&lt;/span&gt; 配置 compass&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_scss&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;4&lt;/span&gt; 书写 scss 文件&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ul&gt;&lt;/nav&gt;
&lt;/div&gt;

&lt;div class=&#34;&#34;&gt;
  &lt;p&gt;
    在我的前端开发工作里，CSS 贴图定位占用的时间不少。首先要切出小图片，然后放置到 sprite 大图里，确定 x、y 位置，最后写到 CSS 规则里：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;body {
    background:url(../img/sprite.png) no-repeat -100px 0;
}
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    Photoshop 提供的确定 x、y 位置的方法并不高效，而况我还要在 CSS 文件里手写 x、y 值，完全是低效的体力劳动。后期如果还对 Sprite 做修改，那更让人头大。
  &lt;/p&gt;
  
  &lt;p&gt;
    Compass 提供了一个相对高效的&lt;a href=&#34;http://compass-style.org/help/tutorials/spriting/&#34;&gt;贴图定位方法&lt;/a&gt;，我们要做的，只是切出小图，给它们命名，然后统一保存到某文件夹下，配置好 Compass，然后写 sass 文件，再运行命令：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;compass watch
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    接着，Compass 自动生成贴图定位的类，我们在 HTML 代码中添加相应类名就好了。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_Ruby&#34;&gt;安装 Ruby&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_Ruby&#34; href=&#34;#_Ruby&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    compass 是一个 Ruby 包，所以我们需要事先安装 &lt;a href=&#34;https://www.ruby-lang.org/en/&#34;&gt;Ruby&lt;/a&gt;。最新版本的 Ruby 里已经包含 RubyGems，不需要另外安装。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_compass&#34;&gt;安装 compass&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_compass&#34; href=&#34;#_compass&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    打开命令行工具：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;gem install compass
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    这个命令会同时安装 Compass 与 Sass。我们可以通过 &lt;code&gt;compass version&lt;/code&gt; 命令查看安装情况。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_compass-2&#34;&gt;配置 compass&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_compass-2&#34; href=&#34;#_compass-2&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    根据项目情况，全新创建的，还是已有项目，我们会有不同的&lt;a href=&#34;http://compass-style.org/install/&#34;&gt;配置命令&lt;/a&gt;。
  &lt;/p&gt;
  
  &lt;p&gt;
    比如我要在一个已有项目中配置：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;compass create --css-dir &#34;css&#34; --javascripts-dir &#34;js&#34; --images-dir &#34;img&#34;
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    Compass 会自动生成一个 sass 文件夹。
  &lt;/p&gt;
  
  &lt;p&gt;
    在运行 &lt;code&gt;compass watch&lt;/code&gt; 命令后，sass 文件夹下的 .scss 文件会自动编译到 css 文件夹下。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_scss&#34;&gt;书写 scss 文件&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_scss&#34; href=&#34;#_scss&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    假定要应用贴图定位的图片全部放在 img/icon/ 目录下，总共有三张：
  &lt;/p&gt;
  
  &lt;ol&gt;
    &lt;li&gt;
      upload.png
    &lt;/li&gt;
    &lt;li&gt;
      download.png
    &lt;/li&gt;
    &lt;li&gt;
      pause.png
    &lt;/li&gt;
  &lt;/ol&gt;
  
  &lt;p&gt;
    则 sass 目录下，我们的 .scss 文件这样写：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;@import &#34;icon/*.png&#34;;
@include all-icon-sprites;
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    &lt;strong&gt;注意&lt;/strong&gt;：scss 文件中的 &lt;strong&gt;icon&lt;/strong&gt; 是对应于 img 目录下的 &lt;strong&gt;icon&lt;/strong&gt; 目录名称的。
  &lt;/p&gt;
  
  &lt;p&gt;
    &lt;code&gt;compass watch&lt;/code&gt; 命令在 css 目录下编译出的 css 文件如下：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;/* line 58, icon/*.png */
.icon-sprite, .icon-download, .icon-pause, .icon-upload {
  background: url(&#39;/img/icon-seab081b7aa.png&#39;) no-repeat;
}

/* line 60, ../../../.rvm/gems/ruby-2.0.0-p247/gems/compass-0.12.2/frameworks/compass/stylesheets/compass/utilities/sprites/_base.scss */
.icon-download {
  background-position: 0 0;
}

/* line 60, ../../../.rvm/gems/ruby-2.0.0-p247/gems/compass-0.12.2/frameworks/compass/stylesheets/compass/utilities/sprites/_base.scss */
.icon-pause {
  background-position: 0 -256px;
}

/* line 60, ../../../.rvm/gems/ruby-2.0.0-p247/gems/compass-0.12.2/frameworks/compass/stylesheets/compass/utilities/sprites/_base.scss */
.icon-upload {
  background-position: 0 -512px;
}
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    另外，img 目录下多出一个 icon-xxxxxxx.png 的图片，这是 compass 自动组合生成的，不需要我们操心。
  &lt;/p&gt;
  
  &lt;p&gt;
    接下来，我们在 HTML 代码中引用上述类即可：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;&amp;lt;i class=&#34;icon-upload&#34;&amp;gt;&amp;lt;/i&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    如果我们要明确每个贴图的宽度、高度，只要在 scss 文件中的 &lt;code&gt;@include all-icon-sprites&lt;/code&gt; 后加个 &lt;code&gt;true&lt;/code&gt;：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;@include all-icon-sprites(true);
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    生成的 CSS 会变成如下：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;/* line 58, icon/*.png */
.icon-sprite, .icon-download, .icon-pause, .icon-upload {
  background: url(&#39;/img/icon-seab081b7aa.png&#39;) no-repeat;
}

/* line 60, ../../../.rvm/gems/ruby-2.0.0-p247/gems/compass-0.12.2/frameworks/compass/stylesheets/compass/utilities/sprites/_base.scss */
.icon-download {
  background-position: 0 0;
  height: 256px;
  width: 256px;
}

/* line 60, ../../../.rvm/gems/ruby-2.0.0-p247/gems/compass-0.12.2/frameworks/compass/stylesheets/compass/utilities/sprites/_base.scss */
.icon-pause {
  background-position: 0 -256px;
  height: 256px;
  width: 256px;
}

/* line 60, ../../../.rvm/gems/ruby-2.0.0-p247/gems/compass-0.12.2/frameworks/compass/stylesheets/compass/utilities/sprites/_base.scss */
.icon-upload {
  background-position: 0 -512px;
  height: 256px;
  width: 256px;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>