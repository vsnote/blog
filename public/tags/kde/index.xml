<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Kde on 陈三</title>
    <link>https://www.zfanw.com/blog/tags/kde/</link>
    <description>Recent content in Kde on 陈三</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Fri, 23 Jan 2015 17:45:35 +0000</lastBuildDate>
    <atom:link href="https://www.zfanw.com/blog/tags/kde/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>安装 Plasma 5 的错误 plasmashell closed unexpected</title>
      <link>https://www.zfanw.com/blog/plasma-5-plasmashell-closed-unexpected.html</link>
      <pubDate>Fri, 23 Jan 2015 17:45:35 +0000</pubDate>
      
      <guid>https://www.zfanw.com/blog/plasma-5-plasmashell-closed-unexpected.html</guid>
      <description>

&lt;p&gt;最近盯上 &lt;a href=&#34;https://www.kde.org/announcements/plasma5.0/&#34;&gt;Plasma 5&lt;/a&gt;，于是就在我的 openSUSE 13.2 上安装。&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;先是按照 &lt;a href=&#34;https://en.opensuse.org/SDB:KDE_repositories#KDE_Frameworks_5_.26_Plasma_5&#34;&gt;openSUSE 说明&lt;/a&gt;添加两个库：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;$ sudo zypper ar -f http://download.opensuse.org/repositories/KDE:/Frameworks5/openSUSE_13.2/ Frameworks5&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$ sudo zypper ar -f http://download.opensuse.org/repositories/KDE:/Qt5/openSUSE_13.2/ qt5&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;接着安装 Plasma 5：&lt;/p&gt;

&lt;p&gt;&lt;code&gt;$ sudo zypper in plasma5-session&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;安装 plasma 5 过程中会卸载掉许多 KDE 4 相关的内容，别怕，如果有冲突，通常选 1 然后回车确认就对了。&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;重启系统。&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;进入系统后，随即有个窗口报错：&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;We are sorry, plasmashell closed unexpectedly. You cannot report this error, because plasmashell does not provide a bug reporting address.&lt;/p&gt;

&lt;p&gt;Detais:&lt;/p&gt;

&lt;p&gt;Executable: plasmashell PID: 1536 Signal: Aborted (6) Time: 1/23/15 14:31:50&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;也可以&lt;a href=&#34;http://drp.io/myk&#34;&gt;点击看图片&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;注意，图中的窗口关掉后桌面只是一片空白。但因为我的 KDE 的窗口管理器用的是 xmonad，所以仍然可以调用出 konsole，通过命令行操作、打开 Firefox、连接网络等。&lt;/p&gt;

&lt;p&gt;找了许多材料，没什么效果，最后跑 &lt;a href=&#34;https://forum.kde.org/viewtopic.php?f=289&amp;amp;t=124595&#34;&gt;KDE 论坛发贴&lt;/a&gt;，但整天下来都没人回复，只好自己再接再厉。最后运气女神终于同情了我。&lt;/p&gt;

&lt;h2 id=&#34;解决办法&#34;&gt;解决办法&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;查看上面添加的两个库的对应 ID：&lt;/p&gt;

&lt;p&gt;&lt;code&gt;$ zypper lr&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;我的结果如下：&lt;/p&gt;

&lt;pre&gt;sam@orchid:~|master⚡⇒  zypper lr
#  | Alias                                  | Name                                   | Enabled | Refresh
---+----------------------------------------+----------------------------------------+---------+--------
1 | Firefox                                | Firefox                                | Yes     | Yes    
2 | Framewordks5                           | Frameworks5                            | Yes     | Yes    
3 | Java:packages                          | Java:packages                          | Yes     | Yes    
4 | M17N                                   | M17N                                   | Yes     | Yes    
5 | MargueriteSu                           | MargueriteSu                           | Yes     | Yes    
6 | Mozilla                                | Mozilla                                | Yes     | Yes    
7 | Node.js                                | Node.js                                | Yes     | Yes    
8 | PackMan_Essentials                     | PackMan_Essentials                     | Yes     | Yes    
9 | X11:Bumblebee                          | X11:Bumblebee                          | Yes     | Yes    
10 | X11_WindowManagers                     | X11_WindowManagers                     | Yes     | Yes    
11 | devel:languages:nodejs                 | devel:languages:nodejs                 | Yes     | Yes    
12 | dvd                                    | dvd                                    | Yes     | Yes    
13 | games:tools                            | games:tools                            | Yes     | Yes    
14 | google-chrome                          | google-chrome                          | Yes     | Yes    
15 | google-webdesigner                     | google-webdesigner                     | Yes     | Yes    
16 | home:Mailaender:branches:Java:packages | home:Mailaender:branches:Java:packages | Yes     | Yes    
17 | home:opensuse_zh                       | home:opensuse_zh                       | Yes     | Yes    
18 | home:ralflangb1:composer2distribution  | home:ralflangb1:composer2distribution  | No      | Yes    
19 | home:ruiabreuferreira                  | home:ruiabreuferreira                  | Yes     | Yes    
20 | home:ykoba                             | home:ykoba                             | Yes     | Yes    
21 | libdvdcss                              | libdvdcss                              | Yes     | Yes    
22 | mono-project                           | mono-project                           | Yes     | Yes    
23 | openSUSE:13.2:NON-OSS                  | openSUSE:13.2:NON-OSS                  | Yes     | Yes    
24 | openSUSE:13.2:OSS                      | openSUSE:13.2:OSS                      | Yes     | Yes    
25 | qt5                                    | qt5                                    | Yes     | Yes    
26 | repo-source                            | openSUSE-13.2-Source                   | Yes     | Yes    
27 | repo-update                            | openSUSE-13.2-Update                   | Yes     | Yes    
28 | repo-update-non-oss                    | openSUSE-13.2-Update-Non-Oss           | Yes     | Yes    
29 | security                               | security                               | Yes     | Yes    
30 | utilities                              | utilities                              | Yes     | Yes    
31 | zh                                     | zh   
&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;更新软件&lt;/p&gt;

&lt;p&gt;&lt;code&gt;$ sudo zypper dup --from 2 --from 25&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;这里，我强制要求软件从 ID 为 2 和 25 的库升级。&lt;/ol&gt;&lt;/p&gt;

&lt;p&gt;最后重启系统，能正常进入 Plasma 5 了。&lt;/p&gt;

&lt;p&gt;当然，以上仅是我个人情况，如果你也碰上，并恰巧通过搜索引擎来到这一篇，请仅做参考。如果你因此搞坏了系统，本人不打算心怀歉意。&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
    </item>
    
    <item>
      <title>KDE 与 Xmonad</title>
      <link>https://www.zfanw.com/blog/kde-with-xmonad.html</link>
      <pubDate>Sat, 06 Dec 2014 03:23:11 +0000</pubDate>
      
      <guid>https://www.zfanw.com/blog/kde-with-xmonad.html</guid>
      <description>&lt;div id=&#34;toc_container&#34; class=&#34;ml-l u-floatRight pure-u-1-1 pure-u-sm-2-5 toc_white no_bullets&#34;&gt;
  &lt;nav id=&#34;myaffix&#34;&gt;
  
  &lt;p class=&#34;toc-title&#34;&gt;
    目录
  &lt;/p&gt;
  
  &lt;ul class=&#34;toc-list nav&#34; role=&#34;menu&#34;&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_Xmonad&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;1&lt;/span&gt; 安装 Xmonad&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#_xmonadhs&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;2&lt;/span&gt; 配置 xmonad.hs&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#i&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;3&lt;/span&gt; 设置窗口管理器&lt;/a&gt;
    &lt;/li&gt;
    &lt;li class=&#34;toc-list__item&#34; role=&#34;menuitem&#34;&gt;
      &lt;a href=&#34;#i-2&#34;&gt;&lt;span class=&#34;toc_number toc_depth_1&#34;&gt;4&lt;/span&gt; 附录&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ul&gt;&lt;/nav&gt;
&lt;/div&gt;

&lt;div class=&#34;&#34;&gt;
  &lt;p&gt;
    之前我写过一篇博客 &lt;a href=&#34;http://www.zfanw.com/blog/opensuse-xmonad.html&#34;&gt;openSUSE 下的 xmonad&lt;/a&gt;，讲的是完整的 xmonad 环境，这篇讲 &lt;strong&gt;KDE 下如何使用 xmonad&lt;/strong&gt;，好处是 KDE 的许多功能都可以使用，只是窗口管理器换成 xmonad。
  &lt;/p&gt;
  
  &lt;blockquote&gt;
    &lt;p&gt;
      系统环境：openSUSE 13.2
    &lt;/p&gt;
  &lt;/blockquote&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_Xmonad&#34;&gt;安装 Xmonad&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_Xmonad&#34; href=&#34;#_Xmonad&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    参照&lt;a href=&#34;http://www.zfanw.com/blog/opensuse-xmonad.html&#34;&gt;前一篇说明&lt;/a&gt;，使用 &lt;code&gt;cabal&lt;/code&gt; 安装 xmonad。
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;_xmonadhs&#34;&gt;配置 xmonad.hs&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;hey_xmonadhs&#34; href=&#34;#_xmonadhs&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    打开 &lt;code&gt;~/.xmonad/xmonad.hs&lt;/code&gt; 文件，将内容改为如下&lt;fnref target=&#34;14705.1&#34; /&gt;：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;import System.IO

import XMonad
import XMonad.Config.Kde
import XMonad.Hooks.SetWMName
import XMonad.Util.WindowProperties (getProp32s)

main = do
  xmonad kde4Config {
    terminal = &#34;konsole&#34;
  , modMask = mod4Mask
  , startupHook = setWMName &#34;LG3D&#34;
  , manageHook = ((className =? &#34;krunner&#34;) &amp;gt;&amp;gt;= return . not --&amp;gt; manageHook kde4Config)
      &amp;lt;+&amp;gt; (kdeOverride --&amp;gt; doFloat)
}

kdeOverride :: Query Bool
kdeOverride = ask &amp;gt;&amp;gt;= \w -&amp;gt; liftX $ do
    override &amp;lt;- getAtom &#34;_KDE_NET_WM_WINDOW_TYPE_OVERRIDE&#34;
    wt &amp;lt;- getProp32s &#34;_NET_WM_WINDOW_TYPE&#34; w
    return $ maybe False (elem $ fromIntegral override) wt
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;i&#34;&gt;设置窗口管理器&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;heyi&#34; href=&#34;#i&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;p&gt;
    先用 &lt;code&gt;which&lt;/code&gt; 命令查看 xmonad 路径：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;sam@linux-qo4p:~|master⚡⇒  which xmonad 
/home/sam/.cabal/bin/xmonad
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    在 &lt;em&gt;~/.kde4/env&lt;/em&gt; 目录（&lt;strong&gt;如果是 &lt;a href=&#34;https://www.kde.org/announcements/plasma5.0/&#34; title=&#34;plasma 5, kde 5&#34;&gt;Plasma5&lt;/a&gt; 的话则是在 ~/.config/plasma-workspace/env **）下创建 **set_window_manager.sh&lt;/strong&gt; 文件，添加如下内容：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;export KDEWM=/home/sam/.cabal/bin/xmonad
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    修改文件权限，允许文件执行：
  &lt;/p&gt;
  
  &lt;pre&gt;&lt;code&gt;$ chmod 755 set_window_manager.sh
&lt;/code&gt;&lt;/pre&gt;
  
  &lt;p&gt;
    注销 KDE 会话，然后再登录进去，KDE 的窗口管理器已经从 kwin 换成 Xmonad 了&lt;fnref target=&#34;14705.2&#34; /&gt;，如下图：
  &lt;/p&gt;
  
  &lt;p&gt;
    [resp_image id=&amp;#8217;14769&amp;#8242; caption=&amp;#8221; ]
  &lt;/p&gt;
  
  &lt;h2 class=&#34;storycontent-h2&#34;&gt;
    &lt;span id=&#34;i-2&#34;&gt;附录&lt;/span&gt;&lt;a title=&#34;标题链接地址&#34; class=&#34;u-floatRight hidden&#34; id=&#34;heyi-2&#34; href=&#34;#i-2&#34;&gt;&lt;span class=&#34;&#34; aria-hidden=&#34;true&#34;&gt;#&lt;/span&gt;&lt;/a&gt;
  &lt;/h2&gt;
  
  &lt;ol&gt;
    &lt;li&gt;
      &lt;a href=&#34;https://github.com/chenxsan/rc-files/blob/master/.xmonad/xmonad.hs&#34;&gt;存放在 Github 上的我的 xmonad.hs 配置文件&lt;/a&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
  
  &lt;footnotes&gt;
    &lt;fn name=&#34;14705.1&#34;&gt;
      &lt;p&gt;
        &lt;a href=&#34;https://code.google.com/p/xmonad/issues/attachmentText?id=430&amp;aid=-7752565881665183817&amp;name=xmonad.hs&amp;token=ABZ6GAfGlZ9LEhxXYjzpcH9ZO25qwQmc0w%3A1417834536394&#34;&gt;Google Code 上的一个 xmonad.hs 配置文件（英文）&lt;/a&gt;
      &lt;/p&gt;
    &lt;/fn&gt;
    
    &lt;fn name=&#34;14705.2&#34;&gt;
      &lt;p&gt;
        &lt;a href=&#34;https://www.haskell.org/haskellwiki/Xmonad/Using_xmonad_in_KDE&#34;&gt;HaskellWiki 教你如何在 KDE 下使用 Xmonad（英文）&lt;/a&gt;
      &lt;/p&gt;
    &lt;/fn&gt;
  &lt;/footnotes&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>