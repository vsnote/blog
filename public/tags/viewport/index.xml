<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Viewport on 陈三</title>
    <link>https://www.zfanw.com/blog/tags/viewport/</link>
    <description>Recent content in Viewport on 陈三</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Sat, 31 May 2014 03:23:49 +0000</lastBuildDate>
    <atom:link href="https://www.zfanw.com/blog/tags/viewport/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>从meta viewport聊起</title>
      <link>https://www.zfanw.com/blog/%E4%BB%8Emeta-viewport%E8%81%8A%E8%B5%B7.html</link>
      <pubDate>Sat, 31 May 2014 03:23:49 +0000</pubDate>
      
      <guid>https://www.zfanw.com/blog/%E4%BB%8Emeta-viewport%E8%81%8A%E8%B5%B7.html</guid>
      <description>&lt;p&gt;iPhone 4s的参数：&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;960-by-640-pixel resolution at 326 ppi&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;长960像素，宽640像素，ppi指pixels per inch，每英寸长度的像素数。&lt;/p&gt;

&lt;p&gt;但Safari里，渲染页面默认是按980px宽来的。&lt;/p&gt;

&lt;p&gt;比如如下的HTML：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
  &amp;lt;meta charset=&amp;quot;utf-8&amp;quot;&amp;gt;
  &amp;lt;title&amp;gt;iOS7 safari&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
  &amp;lt;div&amp;gt;陈三&amp;lt;/div&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;CSS规则：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;div{
  width:980px;
  background-color:green;
  color: white;
  font-size:100px;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Safari里该页面效果：&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.zfanw.com/blog/wp-content/uploads/2014/05/2014-05-30-23.56.07.png&#34; title=&#34;点击查看大图&#34;&gt;&lt;img src=&#34;http://www.zfanw.com/blog/wp-content/uploads/2014/05/2014-05-30-23.56.07.png&#34; alt=&#34;ios7 safari 980px&#34; width=&#34;320&#34; height=&#34;480&#34; class=&#34;alignnone size-full wp-image-12858&#34; srcset=&#34;https://www.zfanw.com/blog/wp-content/uploads/2014/05/2014-05-30-23.56.07.png 640w, https://www.zfanw.com/blog/wp-content/uploads/2014/05/2014-05-30-23.56.07-200x300.png 200w, https://www.zfanw.com/blog/wp-content/uploads/2014/05/2014-05-30-23.56.07-66x100.png 66w&#34; sizes=&#34;(max-width: 320px) 100vw, 320px&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;一个自称宽为640像素宽的手机，带的一个浏览器却可以布置一个980px的div块。&lt;/p&gt;

&lt;p&gt;怎么回事？&lt;/p&gt;

&lt;p&gt;问题在于&lt;code&gt;viewport&lt;/code&gt;&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:12845-1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:12845-1&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;

&lt;p&gt;在Safari里，默认视口宽度为980px。你可以把它想像成桌面浏览器宽度为980px的样子。&lt;/p&gt;

&lt;p&gt;所以，上面的HTML代码，我们写成：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
  &amp;lt;meta charset=&amp;quot;utf-8&amp;quot;&amp;gt;
  &amp;lt;meta name=&amp;quot;viewport&amp;quot; content=&amp;quot;width=980&amp;quot;&amp;gt;&amp;lt;!-- 加了这一句 --&amp;gt;
  &amp;lt;title&amp;gt;iOS7 safari&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
  &amp;lt;div&amp;gt;陈三&amp;lt;/div&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;效果跟上面是一样的。&lt;/p&gt;

&lt;p&gt;(如果你愿意做个试验，不断增加&lt;code&gt;content&lt;/code&gt;里&lt;code&gt;width&lt;/code&gt;的值，会发现，&lt;code&gt;width&lt;/code&gt;值超过1293时，safari底部会出现横向滚动条。这是否意味着640像素宽的4S屏幕最多只能把握1293px？有待说明。)&lt;/p&gt;

&lt;p&gt;设计自适应页面时，我们常常能看到&lt;code&gt;content&lt;/code&gt;的另外一个取值：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;meta name=&amp;quot;viewport&amp;quot; content=&amp;quot;width=device-width&amp;quot;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;这一句的意思是，把&lt;code&gt;viewport&lt;/code&gt;的宽度设置为&lt;code&gt;device-width&lt;/code&gt;(设备宽度)。&lt;/p&gt;

&lt;p&gt;拿4s手机说，我们马上能想到，&lt;code&gt;viewport&lt;/code&gt;的宽度为640像素。&lt;/p&gt;

&lt;p&gt;但这个判断是错的，&lt;code&gt;viewport&lt;/code&gt;的值是320px，可以通过设置&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;meta name=&amp;quot;viewport&amp;quot; content=&amp;quot;width=320&amp;quot;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;来验证。这一句的效果跟设置&lt;code&gt;content=&amp;quot;width=device-width&amp;quot;&lt;/code&gt;是一样的。&lt;/p&gt;

&lt;p&gt;也就是说，所谓的&lt;code&gt;device-width&lt;/code&gt;，在4s手机上的取值是320px。是&lt;code&gt;640/2&lt;/code&gt;得来的(2是4S的device pixel ratio取值)。&lt;/p&gt;

&lt;p&gt;这看起来简直混乱且莫名其妙。&lt;/p&gt;

&lt;p&gt;但如果从「适用」的角度说，就能理解这混乱。早期的15寸、17寸CRT显示器，那时屏幕分辨率通常就1024&amp;#215;768，甚至更小，800&amp;#215;600，同样大小的字体，比如14px，在15寸屏幕上可以看清楚，但换成同样分辨率大小仅3.5寸的屏幕，还看得清楚吗？这会招致使用上的问题。&lt;/p&gt;

&lt;p&gt;于是在手机上，我们需要做些调整。14px的字体，我们会用更多的物理像素来表示。&lt;/p&gt;

&lt;p&gt;这里，两个概念需要区别，一是CSS的px单位，二是物理像素。&lt;/p&gt;

&lt;p&gt;CSS里定义的px，是会变的，它不是绝对单位，比如1cm就是1cm，走遍地球都一样。我们借助一张图片来说明，这张图片大小为710&amp;#215;425 px(注：图片来自维基)：&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;content=&amp;quot;width=980&amp;quot;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.zfanw.com/blog/wp-content/uploads/2014/05/2014-05-31-10.38.33.png&#34;&gt;&lt;img src=&#34;http://www.zfanw.com/blog/wp-content/uploads/2014/05/2014-05-31-10.38.33.png&#34; alt=&#34;width=980 css px&#34; width=&#34;320&#34; height=&#34;480&#34; class=&#34;alignnone size-full wp-image-12900&#34; srcset=&#34;https://www.zfanw.com/blog/wp-content/uploads/2014/05/2014-05-31-10.38.33.png 640w, https://www.zfanw.com/blog/wp-content/uploads/2014/05/2014-05-31-10.38.33-200x300.png 200w, https://www.zfanw.com/blog/wp-content/uploads/2014/05/2014-05-31-10.38.33-66x100.png 66w&#34; sizes=&#34;(max-width: 320px) 100vw, 320px&#34; /&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;code&gt;content=&amp;quot;width=320&amp;quot;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.zfanw.com/blog/wp-content/uploads/2014/05/2014-05-31-10.39.00.png&#34;&gt;&lt;img src=&#34;http://www.zfanw.com/blog/wp-content/uploads/2014/05/2014-05-31-10.39.00.png&#34; alt=&#34;width=320 viewport&#34; width=&#34;320&#34; height=&#34;480&#34; class=&#34;alignnone size-full wp-image-12902&#34; srcset=&#34;https://www.zfanw.com/blog/wp-content/uploads/2014/05/2014-05-31-10.39.00.png 640w, https://www.zfanw.com/blog/wp-content/uploads/2014/05/2014-05-31-10.39.00-200x300.png 200w, https://www.zfanw.com/blog/wp-content/uploads/2014/05/2014-05-31-10.39.00-66x100.png 66w&#34; sizes=&#34;(max-width: 320px) 100vw, 320px&#34; /&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;这张长710px的图片，物理尺寸却完全不一样。我们通过改变&lt;code&gt;viewport&lt;/code&gt;的值，改变了单位px的绝对长度。&lt;/p&gt;

&lt;p&gt;但4S手机的&lt;strong&gt;物理像素&lt;/strong&gt;不会变，不可能因为我们改个&lt;code&gt;viewport&lt;/code&gt;的值苹果就得调整4S的参数页面。&lt;/p&gt;

&lt;p&gt;所以设计师给4S手机设计网页时，敲下640&amp;#215;960的图片大小，我们就知道，前端的不和谐长存。&lt;/p&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:12845-1&#34;&gt;&lt;a href=&#34;https://developer.apple.com/library/ios/documentation/appleapplications/reference/safariwebcontent/usingtheviewport/usingtheviewport.html&#34;&gt;Safari Web Content Guide: Configuring the Viewport&lt;/a&gt;
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:12845-1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>