<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.16" />


<title>jspm 安装使用 Bootstrap 与 jQuery - 陈三</title>
<meta property="og:title" content="jspm 安装使用 Bootstrap 与 jQuery - 陈三">



  






<link rel="stylesheet" href="https://www.zfanw.com/blog/css/main.css" media="all">

  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="https://www.zfanw.com/blog/" class="nav-logo">陈三</a>

  <ul class="nav-links">
    
    <li><a href="/blog/">Home</a></li>
    
    <li><a href="/blog/about/">关于</a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">

  <article class="article">
    
    <span class="article-duration">1 min read</span>
    

    <h1 class="article-title">jspm 安装使用 Bootstrap 与 jQuery</h1>

    
    <span class="article-date">May 5, 2015</span>
    

    <div class="article-content">
      <p>你可能知道，bootstrap 依赖于 jQuery，并且，是依赖全局的 jQuery，即页面的 <code>window</code> 对象下应该有个 <code>window.jQuery</code> 或 <code>window.$</code> 属性。</p>

<p>我在上一篇 <a href="http://www.zfanw.com/blog/jspm-systemjs.html">jspm 与 SystemJS 用法</a> 中提到，jspm 默认安装 <code>github:components/jquery</code> 上定义的 jQuery<del>，这个<a href="https://github.com/components/jquery">库的维护并不及时</a>，譬如现在 jQuery 最新版本是 1.11.3 与 2.1.4，而 components/jquery 上仍是 1.11.2 与 2.1.3 版本</del>。</p>

<p>对于第三方库，某些版本虽然只是小更新，但也许修复的 <a href="http://blog.jquery.com/2015/04/28/jquery-1-11-3-and-2-1-4-released-ios-fail-safe-edition/">bug 比较要命</a>，所以我通常都喜欢用最新版本。</p>

<p>但如果在 jspm 里使用 npm 上的 jQuery，会导致 Bootstrap 无法加载 jQuery。</p>

<p>整个流程如下：</p>

<ol>
<li><p>安装 npm 上的最新版本 jQuery</p>

<pre><code>jspm install npm:jquery
</code></pre></li>

<li><p>修改 config.js 中 bootstrap 的依赖</p>

<p>打开 config.js，修改 bootstrap 部分如下：</p>

<pre><code>System.config({
  &quot;map&quot;: {
     &quot;jquery&quot;: &quot;npm:jquery@2.1.4&quot;, // 这一行是 jspm install 时自动配置的
     &quot;github:twbs/bootstrap@3.3.4&quot;: {
       &quot;jquery&quot;: &quot;npm:jquery@2.1.4&quot; // 我们要改的是这一行，将 bootstrap 的 jquery 依赖指向 npm/jquery@2.1.4
      }
  }
});
</code></pre>

<p>这时，<code>import bootstrap from 'bootstrap'</code> 就会报如下的错误：</p>

<p>[resp_image id=&#8217;16059&#8242; caption=&#8221; ]</p></li>
</ol>

<p>这个错误的原因在于，Bootstrap 需要全局 <code>jQuery</code> 或 <code>$</code>，但是 jspm 从 npm 上安装的 jQuery 是 CommonJS 规范的，我们的 <code>window</code> 对象下并没有 <code>jQuery</code> 或 <code>$</code> 属性，结果就报错。</p>

<p>所以目前，如果要在 jspm 中用 Bootstrap，就只能用 github:components/jquery 上的 jQuery 了。</p>

    </div>
  </article>

  

</main>

      <footer class="footer">
        <ul class="footer-links">
          <li>
            <a href="https://www.zfanw.com/blog/index.xml" type="application/rss+xml" target="_blank">RSS feed</a>
          </li>
          <li>
            <a href="https://gohugo.io/" class="footer-links-kudos">Made with Hugo</a>
          </li>
        </ul>
      </footer>

    </div>

    
  </body>
</html>

