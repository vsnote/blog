<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.16" />


<title>模块化 React.js CSS - 陈三</title>
<meta property="og:title" content="模块化 React.js CSS - 陈三">



  






<link rel="stylesheet" href="https://www.zfanw.com/blog/css/main.css" media="all">

  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="https://www.zfanw.com/blog/" class="nav-logo">陈三</a>

  <ul class="nav-links">
    
    <li><a href="/blog/">Home</a></li>
    
    <li><a href="/blog/about/">关于</a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">

  <article class="article">
    
    <span class="article-duration">1 min read</span>
    

    <h1 class="article-title">模块化 React.js CSS</h1>

    
    <span class="article-date">June 6, 2015</span>
    

    <div class="article-content">
      <p><a href="http://facebook.github.io/react/" title="react.js 官网">React.js</a> 的法国开发者 Christopher Chedeau <a href="https://speakerdeck.com/vjeux/react-css-in-js" title="演示稿">分享过一期 react css in js</a>，里面罗列他们如何解决 CSS 中的七个难题：</p>

<ol>
<li>CSS 天然的全局命名空间导致的命名冲突</li>
<li>依赖</li>
<li>无用代码清理</li>
<li>命名压缩，比如 <code>.button</code> -&gt; <code>.ifd</code></li>
<li>共享规则</li>
<li>不确定的解析</li>
<li>代码分离</li>
</ol>

<p>React 最后解决这些问题的方法是用 JavaScript 写 CSS 规则，并<a href="https://facebook.github.io/react/tips/inline-styles.html" title="react 官网的样式文档">内联样式</a>。</p>

<p>但内联样式一样存在问题：</p>

<ol>
<li><code>:hover</code>、<code>:active</code> 这些伪类无法使用</li>
<li>媒体查询无法使用</li>
<li>样式代码也会出现大量重复</li>
</ol>

<p>诚然我们有<a href="http://projects.formidablelabs.com/radium/" title="radium 用法">各种</a> <a href="https://github.com/js-next/react-style" title="react-style 库">workarounds</a> 解决伪类、媒体查询等问题，但我有些担心它们的可用性、可维护性 &#8211; 说到底，它们只是 workaround。</p>

<p>还是回到 CSS 命名约定上。</p>

<p>Google 工程师 <a href="http://philipwalton.com/" title="Philip Walton 个人站点">Philip Walton</a> 一直推荐 BEM，因为 BEM 可以很好地解决我们的 CSS 模块化问题，在 BEM 的定义里，我们可以把模块样式写在<a href="https://en.bem.info/method/filesystem/" title="BEM 中文件系统的使用">以模块名命名的 CSS 文件</a>中，注意，我们的操作系统不允许同一目录下存在同名 CSS 文件，于是我们就巧妙地绕过了 CSS 命名冲突的问题 &#8211; 我承认，项目庞大的话，后面可能出现「行者孙、孙行者、者行孙」这样的奇怪命名。把 BEM 的这个思路应用到 React 上，则我们解决了模块化问题，也不会碰上 React 内联样式里伪类、媒体查询无法使用的问题。</p>

<p>但是，如果把 CSS 文件分散到各个 CSS 文件中，我们就会碰上合并、打包 CSS 的问题。不过 BEM 是成套的，我们最常说及的只是它的命名约定，围绕命名约定，它还提供<a href="https://en.bem.info/tools/bem/bem-tools/">整套的工具</a>。又或者，如果你跟我一样，也在使用 <a href="http://www.zfanw.com/blog/tag/jspm" title="本博客 jspm 相关内容">jspm</a>，则它已经可以解决 CSS 的合并、打包问题。</p>

<p>比如我的一个业余项目，样式表结构如下：</p>

<p>[resp_image id=&#8217;16505&#8242; caption=&#8221; ]</p>

<p>在执行 <code>jspm bundle-sfx script/app --minify</code> 命令后，所有 CSS 文件就被打包到一个 build.css 中了。</p>

<p>当然，使用命名规范并不能解决前面罗列的全部问题。技术常常是一种取舍，世间并没有银子弹。</p>

<div class='timeline'>
  <h2>
    修订历史
  </h2>
  
  <ol>
    <li>
      <span itemprop='dateModified'>2015.06.10 今天恰巧看到一篇<a href="http://keithjgrant.com/posts/against-css-in-js.html" title="打开文章链接">反对 React 的 CSS 用法的文章</a></li> </ol> </div>

    </div>
  </article>

  

</main>

      <footer class="footer">
        <ul class="footer-links">
          <li>
            <a href="https://www.zfanw.com/blog/index.xml" type="application/rss+xml" target="_blank">RSS feed</a>
          </li>
          <li>
            <a href="https://gohugo.io/" class="footer-links-kudos">Made with Hugo</a>
          </li>
        </ul>
      </footer>

    </div>

    
  </body>
</html>

